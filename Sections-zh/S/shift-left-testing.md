# 左移测试 (Shift-left Testing)
[左移测试 (Shift-left Testing)](#shift-left-testing) [左移测试 (Shift-left Testing)](/wiki/shift-left-testing)

## 关于左移测试的常见问题？

#### 基础与重要性
- **什么是左移测试？**
  **左移测试 (Shift-left testing)** 是指将测试活动尽早整合到软件开发生命周期 (SDLC) 中的实践。它强调 **预防重于检测**，通过在问题升级为更大麻烦之前识别并解决它们。这种方法提倡将测试与开发 **并行进行**，而不是作为一个后续阶段。
  为了实施左移测试，团队通常采用 **[测试驱动开发 (TDD)](/wiki/test-driven-development)** 和 **[行为驱动开发 (BDD)](/wiki/bdd)** 方针。这些方法涉及在实际编写代码之前先编写测试，确保代码从一开始就在考虑测试的情况下进行开发。此外，**[单元测试](/wiki/unit-testing)** 被大量使用，开发人员在开发单个代码单元时即编写并运行测试。
  开发人员、测试人员和运维人员之间的 **协作** 至关重要。开发人员承担更多测试责任，而测试人员则更早参与开发过程，为需求和设计讨论做出贡献。这种协作可以通过 **结对编程 (Pair Programming)** 和 **群组编程 (Mob Programming)** 实践来促进。
  整合 **自动化** 是左移测试的关键。**[测试套件](/wiki/test-suite)** 从项目初期就开始构建并扩展。这些自动化测试被集成到 **CI/CD 流水线** 中，确保代码在每次提交时都能得到持续测试。
  为了克服开发人员工作量增加和潜在的文化变革阻力等挑战，团队应专注于 **渐进式采用** 左移实践，并确保提供 **充足的培训** 和 **资源分配**。同时，保持与 **右移测试 (Shift-right testing)** 的平衡也很重要，在右移测试中，通过在生产环境中的监控和测试来捕捉来自真实世界使用的反馈。

- **为什么左移测试在软件开发中很重要？**
  左移测试在软件开发中对于 **早期缺陷检测** 和 **缓解** 至关重要。通过将测试整合到开发生命周期的早期阶段，团队可以在问题还不够复杂且修复成本较低时识别并解决它们。这种方法促进了 **质量文化**，鼓励开发人员从一开始就考虑可测试性和质量，而不是事后才关注。
  采用左移实践意味着测试不再是最后的障碍，而是开发的一个持续方面。这种 **持续反馈循环** 增强了开发人员和测试人员之间的协作，从而形成一个更具 **凝聚力和效率的团队动态**。因此，开发过程变得更加主动而非被动，降低了周期后期出现重大缺陷或问题的风险。
  此外，左移测试与 Agile 和 DevOps 等 **现代开发实践** 完美契合，在这些实践中，快速 **[迭代](/wiki/iteration)** 和持续交付是关键。它通过确保测试跟上开发速度，使团队能够在不牺牲质量的前提下保持交付步伐。
  为了有效实施左移测试，团队通常依赖 **自动化** 来处理重复和详细的 **[测试用例](/wiki/test-case)**，从而让测试人员专注于更复杂和高价值的测试活动。这种资源的战略性利用不仅提高了效率，还发挥了自动化工具及人类洞察力的各自优势。
  总之，左移测试是一种促进 **早期质量保证**、**团队协作** 和 **高效资源利用** 的战略方法，所有这些都是及时交付高质量软件的关键。

- **左移测试有哪些好处？**
  左移测试提供了几项好处，增强了软件开发生命周期 (SDLC) 的整体效率和有效性：
  - **早期 [Bug](/wiki/bug) 检测**：Bug 在开发过程的早期被识别，与后期相比降低了修复成本和工作量。
  - **改善协作**：鼓励开发人员、测试人员和运维人员之间更紧密的协作，促进更好的沟通以及对项目目标和需求的理解。
  - **增加 [测试覆盖率](/wiki/test-coverage)**：由于测试启动更早并与开发并行进行，可以实现更彻底的测试覆盖。
  - **更快的反馈循环**：为开发人员提供关于代码质量和功能的快速反馈，促使更快的迭代和完善。
  - **缩短上市时间**：通过将测试整合到开发的早期阶段来加速功能和 Bug 修复的交付，从而缩短发布周期。
  - **增强 [质量保证](/wiki/quality-assurance)**：倡导贯穿整个 SDLC 的质量第一心态，从而产出更高质量的软件产品。
  - **成本节约**：减少与后期缺陷补救相关的成本，以及部署后问题可能导致的停机时间。
  - **风险缓解**：有助于及早识别和缓解风险，防止项目延期并确保符合行业标准和法规。
  通过将这些优势融入 SDLC，左移测试显著有助于构建更稳健、高效和可靠的软件开发过程。

- **左移测试如何提高软件产品的质量？**
  左移测试通过在开发生命周期的早期且频繁地嵌入测试来增强 **[软件质量](/wiki/software-quality)**。这种前瞻性的方法允许进行 **早期缺陷检测** 和解决，这比在周期后期修复问题更具成本效益且耗时更少。通过将测试整合到开发的初始阶段，团队可以确保代码从一开始就是稳健的，从而减少进入生产环境的 **[Bug](/wiki/bug)** 数量。
  采用左移实践，开发人员可以获得关于代码的即时反馈，培养 **质量文化** 并分担产品可靠性的责任。开发人员和测试人员之间的这种协作能更深入地理解代码库及其潜在漏洞，从而提高 **整体软件完整性**。
  此外，左移测试鼓励使用 **自动化测试框架** 和工具，为新功能提供快速且可重复的验证以及 **[回归测试](/wiki/regression-testing)**。自动化不仅加快了测试过程，还确保了 **[测试执行](/wiki/test-execution)** 的一致性和准确性，从而实现更稳定、更可靠的产品。
  通过从一开始就关注质量，左移测试最大程度地降低了后期出现意外的风险，并确保软件构建在 **坚实的质量基础** 之上，最终打造出满足用户需求和期望的出色产品。

- **左移测试的关键原则是什么？**
  左移测试由几个关键原则支撑：
  - **早期测试**：尽可能早在开发生命周期中开始测试，理想情况下是在需求和设计阶段。
  - **协作**：培养一个协作环境，开发人员、测试人员和业务分析师共同商讨需求并创建测试用例。
  - **测试自动化**：利用 **[测试自动化](/wiki/test-automation)** 频繁且一致地运行测试，实现快速反馈和回归测试。
  - **持续测试**：将测试整合到持续集成流水线中，确保新代码在编写时即得到测试。
  - **预防重于检测**：专注于预防缺陷而不是在周期后期检测它们，后者成本更高且更耗时。
  - **质量所有权**：鼓励所有团队成员对质量负责，而不仅是测试人员。
  - **反馈循环**：实施短反馈循环，快速识别并解决问题，从而实现更高效的处理。
  - **[增量测试](/wiki/incremental-testing)**：在开发过程中并行进行增量测试，避免未测试代码的堆积（堆积会增加风险）。
  - **左移思维**：培养一种从项目启动就重视早期测试和质量考量的思维方式。
  通过遵循这些原则，左移测试旨在提高 **[软件质量](/wiki/software-quality)**，缩短上市时间，并降低整体项目成本。

#### 实施与策略
- **左移测试在软件开发过程中是如何实施的？**
  左移测试通过将测试活动尽早整合到软件开发生命周期 (SDLC) 中来实施。以下是具体方法：
  1. **在需求阶段嵌入测试**：与利益相关者协作定义可测试的需求。使用 Cucumber 等 **[行为驱动开发 (BDD)](/wiki/bdd)** 框架编写可执行的规范。
  ```gherkin
  功能：用户登录
    场景：有效登录
      当用户导航到登录页面
      且输入有效的凭据时
      那么他们被授予访问仪表板的权限
  ```
  2. **引入 [单元测试](/wiki/unit-testing)**：鼓励开发人员在编写代码的同时编写单元测试。使用 JUnit（Java）或 Mocha（JavaScript）等测试框架。
  ```javascript
  describe('Calculator', () => {
    it('adds two numbers', () => {
      expect(calculator.add(2, 3)).to.equal(5);
    });
  });
  ```
  3. **实施 [测试驱动开发 (TDD)](/wiki/test-driven-development)**：在编写令测试通过的代码之前先编写测试。这确保代码从一开始就被设计为可测试的。
  4. **自动化构建过程**：使用 Jenkins 或 GitHub Actions 等工具自动化构建，并在每次提交时运行测试，确保对代码更改提供即时反馈。
  ```yaml
  on: [push]
  jobs:
    build:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v2
        - name: Run tests
          run: npm test
  ```
  5. **集成静态代码分析**：引入 SonarQube 等工具在代码合并到主分支之前分析潜在问题。
  6. **促进协作**：利用结对编程和代码审查，培养以质量为中心的文化，将测试视为共同职责。
  7. **监控与评估**：跟踪关键指标，如 **[测试覆盖率](/wiki/test-coverage)** 和缺陷率，以持续改进测试过程。
  通过将测试左移，可以确保及早发现并处理缺陷，降低在 SDLC 后期修复它们的成本和工作量。

- **成功进行左移测试有哪些策略？**
  为了确保左移测试成功，请考虑以下策略：
  - **尽早嵌入测试**：将测试整合到开发的初始阶段。鼓励开发人员编写单元测试并参与测试设计。
  - **协作**：培养开发人员和测试人员紧密协作的环境。利用结对编程和共同设计会议来分享知识和职责。
  - **[测试驱动开发 (TDD)](/wiki/test-driven-development)**：采用在编写代码之前先编写测试的实践，确保代码从一开始就是为了通过测试而设计的。
  - **明智选择自动化**：专注于在合适的层级自动化合适的测试。优先处理运行快且能提供快速反馈的单元测试和集成测试。
  ```typescript
  // TypeScript 中的简单自动化单元测试示例
  import { add } from './math';
  describe('add function', () => {
    it('should add two numbers', () => {
      expect(add(2, 3)).toBe(5);
    });
  });
  ```
  - **持续测试**：将自动化测试整合到 CI/CD 流水线中，在每次代码提交时运行，确保即时了解更改的影响。
  - **质量指标**：实施和监控质量指标，以衡量测试工作的有效性并指导改进。
  - **教育与培训**：为开发人员提供持续的测试技术和工具培训，提升其测试技能。
  - **反馈循环**：建立短反馈循环以快速识别并解决缺陷，降低后期修复 Bug 的成本。
  - **风险分析**：进行风险分析，优先在应用程序的最关键领域开展测试工作。
  通过专注于这些策略，测试自动化工程师可以增强左移测试的有效性，从而提高软件质量并优化开发流程。

- **左移测试如何契合 Agile 和 DevOps 方法论？**
  左移测试通过在软件开发生命早周期早期且频繁地嵌入测试，与 Agile 和 DevOps 无缝集成。
  在 **Agile** 中，它与迭代开发模型保持一致，确保测试与开发并行发生，从而实现快速反馈和持续改进。这种方法支持 Agile 对 **增量质量** 和 **以用户为中心的产品** 的强调。
  在 **DevOps** 内部，左移测试是天然契合的，因为它增强了开发、测试和运维之间的 **协作**。它通过自动化测试并将其作为集成过程的一部分运行，为 **CI/CD 流水线** 做出贡献，这有助于更早识别缺陷。这种实践不仅缩短了部署时间，还维持了生产环境下软件的稳定性和可靠性。
  通过应用左移测试，Agile 和 DevOps 都能从 **缩短上市时间**、**降低成本** 和 **提高产品质量** 中获益。它鼓励采取一种预防性的质量保障方式，而非反应式的方式，在整个团队中培养对质量共同负责的文化。
  ```groovy
  // 包含左移测试的 CI 流水线脚本示例
  pipeline {
      agent any
      stages {
          stage('Build') {
              steps {
                  // 构建应用程序代码
                  sh 'make'
              }
          }
          stage('Test') {
              steps {
                  // 在周期早期运行自动化测试
                  sh 'make test'
              }
          }
          // 进一步的部署阶段...
      }
  }
  ```
  本质上，左移测试是 Agile 和 DevOps 的战略推动者，通过促进 **早期测试**、**自动化** 和 **跨职能团队协作**，实现高速交付高质量软件。

- **实施左移测试存在哪些挑战，以及如何克服它们？**
  实施左移测试面临几个挑战，包括：
  - **文化阻力**：开发人员和测试人员可能习惯于传统测试模型。通过培养协作文化并提供关于左移测试益处和实践的培训来克服这一点。
  - **技能差距**：左移要求开发人员具备测试技能，而测试人员需要理解编码。通过交叉培训团队成员并鼓励持续学习来解决。
  - **工具集成**：现有工具可能不支持早期测试。选择并集成那些促进左移的工具，例如使 **[测试自动化](/wiki/test-automation)** 能够在开发环境中运行的工具。
  - **流程适配**：左移需要更改开发流程。实施增量变更并利用回顾会议来优化该流程。
  - **质量所有权**：可能存在谁负责质量的困惑。明确角色，强调质量是集体共同的责任。
  - **[测试环境](/wiki/test-environment) [搭建](/wiki/setup)**：早期测试需要稳定的环境。自动化环境配置并使用容器化以确保一致性。
  - **[测试数据](/wiki/test-data) 管理**：获取合适的测试数据可能是一个障碍。利用测试数据管理工具和技术为早期测试阶段提供相关数据。
  - **持续反馈**：左移依赖快速反馈，这可能会让人应接不暇。实施稳健的监控和告警以有效管理反馈。
  通过有针对性的策略应对这些挑战，左移测试可以成功整合到 SDLC 中。

- **左移测试如何影响开发人员和测试人员的角色？**
  左移测试通过促进紧密协作和对 **[质量保证](/wiki/quality-assurance)** 的共同责任，重新定义了开发人员和测试人员的角色。
  **开发人员** 被鼓励承担更多测试职责，在开发周期早期整合单元测试和集成测试。这种前瞻性的测试方法要求开发人员更加关注可测试性，并具备编写和维护自动化测试的技能。
  另一方面，**测试人员** 更多地参与 SDLC 的 **上游活动**。他们从一开始就参与需求分析、设计讨论，并为 **[测试场景](/wiki/test-scenario)** 的创建做出贡献。他们的角色向质量倡导者和测试架构师转变，设计测试框架并指导开发人员遵循测试最佳实践。
  这两个角色都必须适应更加 **迭代和增量** 的开发过程，测试人员通常在功能开发的同时并行完善 **[测试自动化](/wiki/test-automation)**。开发人员和测试人员之间的界限变得模糊，从而形成一种每个人都对质量负责的文化。
  本质上，左移测试导致了 **技能的交叉融合**。

#### 工具与技术
- **左移测试中常用哪些工具？**
  左移测试中常用的工具包括：
  - **[单元测试](/wiki/unit-testing) 框架**：JUnit、NUnit 和 TestNG 等工具允许开发人员编写并运行单元测试。
  - **打桩/模拟框架 (Mocking Frameworks)**：Mockito、Moq 和 Sinon.js 有助于模拟复杂组件的行为，以便隔离测试各部分。
  - **静态代码分析工具**：SonarQube 和 ESLint 在运行时之前分析潜在代码问题。
  - **集成开发环境 (IDEs)**：Visual Studio 和 IntelliJ IDEA 等 IDE 通常内置有支持左移实践的测试和调试工具。
  - **[行为驱动开发 (BDD)](/wiki/bdd) 工具**：Cucumber 和 SpecFlow 促进 BDD 实践。
  - **[测试自动化](/wiki/test-automation) 框架**：Selenium、Appium 和 Cypress 提供在开发周期早期自动化功能测试的能力。
  - **持续集成工具**：Jenkins、CircleCI 和 GitHub Actions 自动化构建和测试过程。
  - **版本控制系统 (VCS)**：Git 和 Subversion 支持通过频繁集成更改和测试来进行左移。
  - **基础设施即代码 (IaC) 工具**：Terraform 和 Ansible 允许创建可像代码一样版本化管理的测试环境。
  - **服务虚拟化**：WireMock 和 Mountebank 等工具允许模拟服务依赖项。

- **左移测试中有哪些有效的技术？**
  有效的左移测试技术包括：
  - **[测试驱动开发 (TDD)](/wiki/test-driven-development)**：在编写令测试通过的代码之前先编写测试。
  ```javascript
  describe('Calculator', () => {
    it('should add two numbers', () => {
      expect(add(2, 3)).toEqual(5);
    });
  });
  ```
  - **[行为驱动开发 (BDD)](/wiki/bdd)**：使用人类可读的描述来对齐期望。
  ```gherkin
  功能：用户登录
  场景：成功登录
    给定一个已注册用户
    当他们输入正确的凭据时
    那么他们被授予访问权限
  ```
  - **结对编程**：开发人员协作，一人编写代码，另一人实时编写对应测试。
  - **代码审查**：定期审查代码的可测试性。
  - **静态代码分析**：无需执行代码即可识别潜在问题的工具。
  - **[单元测试](/wiki/unit-testing) 框架**：高效创建和运行测试。
  - **模拟和服务虚拟化**：模拟尚未就绪的组件。
  - **持续测试**：将自动化测试集成到 CI/CD 流水线中。
  ```yaml
  pipeline {
    agent any
    stages {
      stage('Test') {
        steps {
          sh 'pytest'
        }
      }
    }
  }
  ```
  - **组件测试**：在早期隔离并测试单个组件。

- **自动化在左移测试中扮演什么角色？**
  自动化在左移测试中起着关键作用，通过实现早期且频繁的测试来支撑这一方法。通过将自动化测试集成到 **开发流水线** 中，团队可以在代码提交后立即运行测试。
  自动化测试（尤其是单元测试和集成测试）的执行由于比手动测试快得多且频率更高，因此能够满足左移对持续测试的强调，从而由于及早发现和解决缺陷而降低成本。
  此外，自动化消除了由于重复工作导致的人为失误，形成了 **可重复且一致** 的测试过程。

- **左移测试如何与持续集成和持续交付 (CI/CD) 集成？**
  集成方式在于流水线的每个环节嵌入测试。
  1. **自动化单元测试**：随着每次代码提交运行。
  ```yaml
  # 运行单元测试的 GitHub Actions 工作流示例
  name: Run Unit Tests
  on: [push, pull_request]
  jobs:
    test:
      runs-on: ubuntu-latest
      steps:
      - uses: actions/checkout@v2
      - name: Run tests
        run: npm test
  ```
  2. **自动化集成测试**：在单元测试通过后验证组件间交互。
  3. **自动化系统测试**：验证完整集成的软件产品。
  4. **嵌入 CI 流水线**：按序配置测试阶段。
  5. **利用测试结果作为质量门禁**：仅在通过自动化测试时才推进构建。
  6. **快速反馈**：将结果立刻反馈给开发人员。
  7. **持续优化**：随着代码演进定期审视和调整测试。

- **左移测试有哪些最佳实践？**
  最佳实践包括：
  - 将测试专业知识嵌入开发团队以共担责任。
  - 自动化单元测试以早期验证。
  - 利用 **[测试驱动开发 (TDD)](/wiki/test-driven-development)**。
  - 结对编程捕获早期问题。
  - 实施侧重于可测试性的代码审查。
  - 使用静态分析工具。
  - 将自动化集成到 CI/CD 流水线中。
  - 优先创建有意义、可维护的测试。
  - 培养每个人都负责的质量文化。
  - 通过指标驱动改进。
  - 与产品负责人协作定义明确的标准。
  - 确保有可靠的 **[测试数据](/wiki/test-data)** 支持。
  - 定期重构测试代码。

#### 左移测试 vs 右移测试
- **左移测试和右移测试的区别是什么？**
  左移和右移是 **[软件测试](/wiki/software-testing)** 中互补的方法：
  **左移测试** 侧重于早期集成和预防，强调在 Bug 进入 QA 团队之前通过单元测试和集成测试来解决。
  与之相对，**右移测试** 将测试延伸到发布后的阶段，利用生产环境的监控、真实用户反馈和 A/B 测试来确保软件在实际运行环境下的表现。
  左移强调 **早期检测和预防**，右移强调 **真实反馈和韧性**。

- **何时应选择左移测试而非右移测试？**
  当目标是 **尽早发现并解决缺陷** 时。特别是：
  - 早期反馈对开发至关重要时。
  - 后期缺陷成本极高时。
  - 项目遵循 Agile/DevOps 且强调 CI/CD 时。
  - 需要在不牺牲质量的情况下缩短上市时间时。
  - 目标是建立预防机制而非反应式补救时。
  反之，如果主要关注生产环境下的系统行为或需要收集真实使用数据时，右移更合适。

- **与右移相比，左移测试的优缺点是什么？**
  **优点**：
  - **早期 [Bug](/wiki/bug) 检测**：降低成本。
  - **改善设计**：通过早期洞察引导架构优化。
  - **开发者参与度高**：促进对代码的深度理解。
  - **更快的发布**。
  - **更高的 [测试覆盖率](/wiki/test-coverage)**。
  **缺点**：
  - **初期投入大**：需要大量的前期规划和执行工作。
  - **职责重叠风险**：可能导致分工模糊。
  - **学习曲线**：需要新的技能。

- **如何在测试策略中结合左移和右移测试？**
  将两者结合可以创造贯穿整个 SDLC 的全面质量保障。
  在开发阶段利用单元、集成和 API 测试（左移），配合 TDD/BDD 和 CI/CD 流水线。
  在生产阶段（右移）侧重监控、可观测性、金丝雀发布和 **[A/B 测试](/wiki/a-b-testing)**。
  协作和共享的测试结果库是两者的桥梁。

- **选择左移还是右移测试时有哪些关键考量因素？**
  - **项目阶段**：早期选左，发布后选右。
  - **反馈循环**：追求即时选左，追求真实选右。
  - **风险容忍度**。
  - **资源分配**。
  - **技术栈支持**。
  - **合规性要求**：严苛合规通常倾向左移以确保发布前完成所有检查。
  总之，互补是最稳健的策略。
