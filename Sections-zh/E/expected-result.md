# 预期结果 (Expected Result)
[预期结果](#预期结果)

### 相关术语：
- [实际结果 (Actual Result)](/glossary/actual-result)
- [测试用例 (Test Case)](/glossary/test-case)

---

## 关于预期结果的问题？

#### 基础与重要性
- **软件测试中的“预期结果”是什么？**
**预期结果 (Expected Result)** 是指测试用例在特定条件下执行时，预先定义的输出或行为。它源自软件需求或设计规范，作为衡量系统实际响应是否正确的**基准**。
在自动化测试中，预期结果至关重要，它使框架能够在无需人工干预的情况下，通过将**实际结果**与预设的预期结果进行比对，自动判定测试的通过（Pass）或失败（Fail）。

- **为什么定义预期结果很重要？**
    - **判定依据**：没有明确的预期结果，测试人员无法客观判定测试是否成功，容易导致缺陷被忽视。
    - **验证一致性**：确保软件行为与需求及设计保持一致。
    - **支持自动化**：允许在 CI/CD 流水中实施程序化的断言检查。
    - **减少歧义**：防止不同测试人员对“成功”有不同的主解，确保测试的可重复性。

- **预期结果对测试流程的贡献**：
它指引了自动化测试的方向，确保测试是可维护且可靠的。通过断言（Assertions），测试脚本能立即准确地发现偏差，触发对潜在缺陷或代码更新的调查。

#### 风险与挑战
- **如果预期结果定义不当会怎样？**
    - **误报与漏报 (False Positives/Negatives)**：该失败时通过，或该通过时失败，导致对质量的误判。
    - **资源浪费**：投入大量精力去调查那些因理解偏差而非由于 Bug 引起的问题。
    - **交付延迟**：因结果不准确导致反复排查和重测，拖慢开发周期。
    - **沟通不畅**：团队各方对目标期望不一致。

#### 创建与职责
- **如何创建预期结果？**
    1. **审查需求**：研究用户故事或规格说明以理解预期行为。
    2. **理解上下文**：考虑业务逻辑和用户预期。
    3. **推导逻辑结果**：根据输入推导逻辑上的输出。
    4. **咨询利益方**：与开发或 PO 澄清模糊点。
    5. **考虑边界情形**：定义边缘情况和异常处理的预期响应。
    6. **精确定义**：以客观、可测试且简洁的方式记录。

- **由谁负责定义？**
通常由**测试分析师或软件测试员**负责编写。在敏捷团队中，这是一个协作过程，涉及开发、测试和业务人员，确保对**验收标准 (Acceptance Criteria)** 有共同理解。

#### 比较与分析
- **如何比较预期结果与实际结果？**
    - **断言 (Assertion)**：使用测试框架提供的方法（如 `expect(actual).toEqual(expected)`）。
    - **视觉验证**：在 UI 测试中使用截图对比工具。
    - **API 响应验证**：比对状态码、响应体和 Header。
    - **数据库校验**：查询后端状态并与期望的数据集对比。

- **如果不匹配该怎么办？**
这表示出现了偏差，需触发以下行动：**调查原因**（排除环境或数据干扰）、**重现问题**、**缺陷报告**（确认是 Bug 后提交）、**修复与回归**。

#### 最佳实践
- **具体化**：说明具体的数值或状态，避免“应保存数据”这种模糊描述，而应说明数据存储的具体位置和反馈。
- **引用文档**：确保与原始需求对齐。
- **覆盖边缘情况**：不只是“快乐路径”，还要定义异常流的结果。
- **保持版本控制**：随系统演进而更新预期结果。
- **同行评审**：通过交叉检查减少遗漏。
