# Canary Testing (金丝雀测试)

[金丝雀测试](#canary-testing)

### 相关术语：
- [A/B 测试 (A/B Testing)](/glossary/ab-testing)

## 关于金丝雀测试的问题？

#### 基础知识与重要性

- **什么是金丝雀测试？**

**金丝雀测试 (Canary testing)** 是一种将新功能或更新在全面部署之前，先发布给一小部分用户或服务器的实践。这种策略允许团队在受控环境中监控更改的影响，并尽早发现潜在问题。它的名字源于历史上煤矿中使用金丝雀来探测有毒气体的做法。

其**核心收益**包括降低大规模问题的风险、获取真实世界的反馈，以及在必要时快速回滚更改的能力。成功与否取决于对关键**性能指标 (KPI)** 和用户反馈的监控，且没有产生显著的负面影响。

实施过程涉及选择一部分用户群或服务器、部署更改，然后监控性能和稳定性。**前提条件**包括拥有稳健的部署流水线、功能开关 (feature flagging) 能力以及监控工具。

**金丝雀测试的常用工具**包括 Kubernetes、Istio 以及 AWS CodeDeploy 等云提供商服务。自动化可以通过控制部署过程和监控结果的脚本及 CI/CD 流水线来实现。

诸如用户反馈有限和性能指标偏差等挑战，可以通过仔细选择金丝雀群体和全面监控来缓解。**最佳实践**包括从一小部分用户群开始、使用功能开关并制定明确的回滚策略。

金丝雀测试是 CI/CD 和 DevOps 不可或缺的一部分，它促进了小规模、频繁且安全的发布。在云环境中，它利用了云的可扩展性和分发能力。它与 **A/B 测试**的不同之处在于，它专注于稳定性而非用户体验的对比。在微服务中，金丝雀测试对于确保单个服务的更新不会破坏整个系统至关重要。

- **为什么金丝雀测试在软件开发中很重要？**

金丝雀测试在软件开发中至关重要，因为它充当了早期预警系统，可以在问题影响整个用户群之前，就在实时生产环境中检测到它们。通过向一小部分用户推出新功能或更改，开发人员可以实时监控影响和性能，确保及时识别并处理任何潜在问题。这种方法最大限度地降低了大规模停机或**严重 Bug** 的风险，这些问题可能导致用户不满和潜在的收入损失。

金丝雀测试的有效性取决于对关键**性能指标 (KPI)** 和用户反馈的仔细监控与分析。成功与否取决于关键问题的缺失以及金丝雀群体的积极响应，从而能够有信心进行更广泛的发布。

在实践中，金丝雀测试通常在 CI/CD 流水线中自动进行，使用支持功能开关、流量路由和自动回滚的工具。自动化实现了更改的快速部署和收回，这对于维护生产环境的稳定性至关重要。

通过将金丝雀测试集成到 DevOps 生命周期中，组织可以培养持续改进和风险缓解的文化。它成为迭代式开发过程的一部分，确保新功能不仅交付迅速，而且交付安全。这在微服务架构和云环境中尤为贴切，因为系统的复杂性和分布式特性可能会放大故障的影响。

总而言之，金丝雀测试是一种在受控方式下验证稳定性和用户满意度的战略方法，从而保护用户体验和生产环境的完整性。

- **金丝雀测试的核心收益有哪些？**

金丝雀测试的核心收益包括：
- **风险缓解**：通过逐步向一小部分用户推出更改，潜在的负面影响得到控制，不太可能影响整个用户群。
- **用户反馈**：来自真实用户的早期反馈有助于识别在早期测试阶段可能未发现的问题。
- **性能评估**：它允许在不进行大规模暴露的情况下，监控生产环境中新功能或更新对性能的影响。
- **快速回滚**：如果出现问题，可以快速撤销更改，而不会影响大多数用户。
- **发布信心**：成功的金丝雀测试增加了对软件在全负载和所有用户细分下表现良好的信心。
- **持续交付**：通过支持频繁且安全的测试发布，助力持续交付实践。
- **针对性测试**：可以针对特定的用户群体，这对于测试与某些人口统计特征或用户行为相关的功能特别有用。

通过利用这些收益，组织可以增强其发布管理过程，确保以高质量交付新功能和更新，并最大程度地减少对最终用户的干扰。

- **金丝雀测试与其他类型的测试有什么区别？**

金丝雀测试与其他类型测试的区别在于其发布更改的**增量方法**。与 **A/B 测试**（同时向不同受众对比两个版本）不同，金丝雀测试在全面部署前先向一小部分用户引入新版本。这与**集成测试**或**系统测试**形成对比，后者的重点通常是在**测试环境**中检查组件间或系统整体的互操作性。

在**性能测试**中，重点是系统在负载下的行为，这可以作为金丝雀测试的一部分，但不是其主要目标。**冒烟测试**是揭示足以拒绝潜在版本发布的基础性故障的初步测试，而金丝雀测试则更多关乎用户体验并发现类生产环境中的问题。

金丝雀测试也不同于**蓝绿部署**（Blue/Green Deployments），后者维护两个相同的生产环境，并在测试后将流量一次性从蓝色切换到绿色。而金丝雀测试是增量转移流量，并在每个步骤中监控问题。

最后，与专注于隔离的单个组件的**单元测试**不同，金丝雀测试在更改做出后评估应用程序在生产环境中的整体稳定性和功能，提供了一个安全网来捕捉单元测试或集成测试可能遗漏的问题。

从本质上讲，金丝雀测试是一种**风险缓解策略**，允许在对用户群影响最小的情况下进行真实世界的暴露和反馈。

- **“金丝雀测试”一词的起源是什么？**

“金丝雀测试 (Canary Testing)”一词源于煤矿开采的历史实践。矿工在工作时会携带装在笼子里的金丝雀；由于这些鸟对一氧化碳等有毒气体更为敏感，金丝雀的任何不适迹象都会作为危险的早期预警，允许矿工撤离。

在软件领域，**金丝雀测试**同样涉及在更广泛发布之前，先向一小部分选定的用户群体发布新功能或服务。这种策略作为一种早期预警系统，用以检测可能影响较大用户群的潜在问题。如果金丝雀发布遇到问题，它只影响有限数量的用户，并且可以快速回滚或修复，从而最大程度地降低对整体系统稳定性和用户体验的风险。

#### 实施

- **金丝雀测试是如何实施的？**

实施金丝雀测试通常涉及以下步骤：
1. **选择用户子集**：识别将接收软件新版本的一小部分用户。
2. **部署新版本**：向选定用户发布新版本，通常使用功能开关或路由机制来引导流量。
3. **监控性能和行为**：使用监控工具跟踪应用程序的性能和出现的任何问题。关键指标可能包括响应时间、错误率和系统资源使用情况。
4. **分析反馈**：收集并评估用户反馈以及自动化监控数据，以评估新版本的稳定性和功能。
5. **决定全面推广或回滚**：根据分析结果，决定是逐步向更多用户推广新版本，还是在检测到重大问题时回滚到之前的版本。
6. **增量增加暴露**：如果金丝雀发布成功，缓慢增加接收新版本的用户百分比，并在过程中持续进行监控和分析。
7. **完成发布**：一旦新版本被认为稳定且未发现重大问题，即可完成对所有用户的推广。

在整个过程中，**自动化**是关键。自动化部署流水线、功能开关系统和监控工具对于平稳高效的金丝雀发布至关重要。脚本或配置管理工具可以管理向用户子集部署的复杂性，并处理潜在的回滚或向全面发布的演进。

- **典型的金丝雀测试过程中涉及哪些步骤？**

典型的金丝雀测试过程步骤如下：
1. **选择用户子集**：识别一小部分具有代表性的用户，他们将接收新功能或更新。
2. **部署到受限环境**：将软件新版本发布到一个尽可能接近生产环境的受控环境中。
3. **监控性能和行为**：使用实时监控工具跟踪系统性能、错误率和用户反馈。
4. **分析指标**：根据预定义的成功标准评估关键**性能指标 (KPI)** 和其他指标，以确保新版本表现符合预期。
5. **扩大规模或回滚**：如果金丝雀发布稳定且符合性能目标，则逐步推广到更多用户。如果出现问题，则回滚更改以最小化影响。
6. **迭代**：利用金丝雀阶段的见解来改进软件。根据需要进行调整并重复该过程，直到版本准备好全面推广。

在这些步骤中，自动化在部署金丝雀版本、监控其性能以及管理推广或回滚过程中发挥着关键作用。诸如功能开关、自动化部署流水线和监控系统等工具对于平稳高效的金丝雀测试过程至关重要。

- **实施金丝雀测试的前提条件是什么？**

实施金丝雀测试的前提条件包括：
- **类生产环境**：一个与生产环境高度一致的稳定环境，以确保结果准确。
- **功能开关系统**：无需部署新代码即可切换功能的开关。
- **监控和日志工具**：用于实时了解应用程序性能和用户行为。
- **自动化部署流水线**：实现功能的平稳推出和回滚。
- **流量路由机制**：将一部分用户引导到金丝雀实例。
- **基准指标**：已建立的性能指标，用于与金丝雀发布进行对比。
- **回滚策略**：如果金丝雀测试失败，用于还原更改的预定义计划。
- **用户细分能力**：能够根据地理位置或行为等标准选择测试用户群。
- **版本控制系统**：管理代码版本并跨部署跟踪更改。

```yaml
# 功能开关配置示例
features:
  new_ui:
    enabled: false
    rollout_percentage: 10
```

确保团队具备分析测试结果并就金丝雀性能做出明智决策的技能。应建立有效的沟通渠道，以快速处理测试阶段出现的任何问题。

- **哪些工具常用于金丝雀测试？**

常用的金丝雀测试工具包括：
- **Spinnaker**：一个开源的多云持续交付平台，支持金丝雀部署和测试。
- **Flagger**：一个 Kubernetes 运算符，使用 Istio、Linkerd、App Mesh、NGINX、Gloo 或 Contour 进行流量切换，自动促进金丝雀部署的晋升。
- **Istio**：一个服务网格，提供进行金丝雀测试所需的流量管理能力。
- **AWS CodeDeploy**：一种自动化代码部署的服务，支持金丝雀发布模式。
- **Google Cloud Deployment Manager**：允许在 Google Cloud 中进行灵活的部署和金丝雀测试。
- **Azure DevOps**：提供在 Azure 云环境中实施金丝雀发布的功能。
- **Harness**：一个提供智能金丝雀部署和验证的持续交付平台。
- **GitLab**：提供包括金丝雀部署在内的 CI/CD 平台。
- **Argo Rollouts**：一个 Kubernetes 控制器和 CRD，提供金丝雀和蓝绿部署等高级部署能力。

这些工具通常与 **Prometheus**、**Datadog**、**New Relic** 和 **Splunk** 等**监控和可观测性平台**集成，这对于分析金丝雀发布的性能和健康状况以做出成功或失败的明智决策至关重要。

- **如何确定金丝雀测试是否成功？**

确定金丝雀测试是否成功涉及评估反映生产环境中新功能或服务稳定性和性能的几个关键指标。成功标准应预先定义，可能包括：
- **错误率**：成功的金丝雀测试不应比基准线显著增加错误率。
- **性能指标**：响应时间和系统资源使用情况应保持在可接受的阈值内。
- **用户体验**：金丝雀执行的关键业务不应降低用户体验。
- **业务指标**：关键业务指标（如转化率或用户参与度）不应受到负面影响。
- **监控和警报**：不应触发任何严重警报，监控系统应报告活动正常。

为了评估这些标准，您可以使用跟踪应用程序性能、用户行为和系统健康状况的工具。如果金丝雀发布在不引起中断或降级的情况下达到或超过预定义的成功阈值，则可以认为它是成功的。相反，如果金丝雀未能满足这些标准，则应将其回滚，并在尝试另一次发布之前解决相关问题。通过持续监控和自动回滚机制实现评估过程的自动化，有助于确保对任何检测到的问题做出迅速反应。

#### 挑战与解决方案

- **金丝雀测试中常见的挑战有哪些？**

金丝雀测试中遇到的常见挑战包括：
- **监控和可观测性**：确保稳健的监控以尽早发现问题可能很复杂。如果没有合适的工具，很难跟踪金丝雀发布的性能和健康状况。
- **流量路由**：配置基础设施以仅将部分流量转移到金丝雀实例可能很棘手，尤其是在复杂环境中。
- **用户体验一致性**：无论用户被路由到金丝雀版本还是稳定版本，保持一致的用户体验都具有挑战性。
- **回滚程序**：在金丝雀测试失败的情况下实施自动化回滚策略需要仔细的计划和测试。
- **指标和决策**：决定正确的指标来判断金丝雀发布的成功或失败至关重要，且通常需要对应用程序行为有深入的理解。
- **环境一致性 (Environment Parity)**：确保金丝雀环境与生产环境高度匹配，以避免由于环境差异导致的**误报**或漏报。
- **资源分配**：为金丝雀分配资源，同时不造成过度拨备或影响稳定生产环境的性能。
- **功能开关管理**：在金丝雀阶段，为不同用户细分管理功能开关以切换功能可能会变得复杂。
- **数据一致性**：处理由金丝雀版本生成或修改的数据，以确保其与稳定版本兼容。
- **版本同步**：保持金丝雀版本与生产版本同步，以防止可能影响测试结果的差异。

通过仔细的规划和合适的工具应对这些挑战，团队可以有效地利用金丝雀测试来提高**软件质量**和可靠性。

- **如何缓解这些挑战？**

缓解金丝雀测试中的挑战涉及战略规划和仔细执行。以下是一些方法：
- **自动化过程**：使用自动化工具部署和监控金丝雀发布，减少人为错误并加速反馈循环。
- **使用功能开关**：控制新功能对用户子集的暴露，实现快速回滚并最小化对用户群的影响。
- **密切监控性能**：实施实时监控和警报以及早发现问题。应仔细审查指标和日志以确保金丝雀的健康。
- **实施稳健的回滚策略**：如果金丝雀显示出问题，应有计划还原到之前的稳定版本。
- **逐步增加流量**：从一小部分流量开始，随着对发布信心的增强而增量增加。
- **隔离和限制故障**：确保金丝雀中的故障不影响系统其余部分。使用容器化或虚拟化技术隔离环境。
- **收集反馈**：在金丝雀阶段收集用户反馈，为关于发布成功的决策提供参考。
- **记录和评审**：发布后，记录结果并评审过程，以改进未来的金丝雀测试。

通过关注这些领域，可以降低与金丝雀测试相关的风险，并确保更顺畅、更可靠的发布。

- **金丝雀测试有哪些最佳实践？**

金丝雀测试的最佳实践包括：
- **逐步推广**：从一小部分流量开始，根据部署的成功情况逐渐增加。
- **监控与警报**：实施稳健的监控以跟踪金丝雀发布的性能和健康状况。为任何异常设置警报。
- **自动回滚**：制定自动化回滚策略，以防金丝雀测试失败。这能最小化对用户的影响。
- **定义成功标准**：明确定义什么构成了成功的金丝雀测试，包括性能基准和错误率。
- **使用功能开关**：采用功能开关控制金丝雀发布的开启和关闭，而无需重新部署应用程序。
- **隔离金丝雀实例**：确保金丝雀实例与生产环境的其余部分隔离，以防止任何潜在的污染。
- **在类生产环境中测试**：金丝雀测试应在高度模拟生产环境的环境中进行，以获得准确结果。
- **版本控制**：将金丝雀版本保持在与主应用程序相同的版本控制中，以维护一致性和可追溯性。
- **反馈循环**：建立反馈循环，以快速处理金丝雀测试中发现的任何问题。
- **文档化**：记录金丝雀测试过程，包括部署计划、监控策略和回滚程序。

通过遵循这些最佳实践，**测试自动化**工程师可以有效地使用金丝雀测试来最小化与部署新功能相关的风险，并确保流畅的用户体验。

- **如何自动化金丝雀测试？**

自动化金丝雀测试涉及编写部署和监控过程的脚本，以在对用户影响最小的情况下验证类生产环境中新功能的稳定性。使用 **CI/CD 流水线**来编排将应用程序新版本发布给一小部分用户或服务器的过程。

1. **第一步**：配置您的部署工具（如 Jenkins、GitLab CI、CircleCI）以触发金丝雀发布。这可以是手动步骤，也可以是合并到主分支后的自动步骤。
2. **第二步**：利用 **基础设施即代码 (IaC)** 工具（如 Terraform 或 AWS CloudFormation）为金丝雀配置所需的环境。
3. **第三步**：使用 Kubernetes 等容器编排工具将应用程序新版本部署到金丝雀环境，这类工具可以管理旧版本和新版本之间的流量分配。

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: canary-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: your-app
  template:
    metadata:
      labels:
        app: your-app
        version: canary
    spec:
      containers:
      - name: your-app
        image: your-app:canary
```

4. **第四步**：使用 Prometheus 或 Datadog 等监控工具监控金丝雀的性能。设置警报以通知团队任何异常情况。
5. **第五步**：使用**功能开关**或**流量路由**规则自动化决策过程，根据预定义的成功标准决定扩大金丝雀部署规模或将其回滚。
6. **第六步**：将反馈循环集成到您的自动化中，确保检测到的任何问题都会导致停止部署并提醒相关团队。

通过自动化这些步骤，您可以确保过程的一致性和可重复性，最大限度地减少人为错误并加速开发人员的反馈周期。

- **金丝雀测试有哪些现实世界的例子？**

金丝雀测试的现实世界示例通常涉及大型 Web 服务和应用程序。以下是几种场景：
- **社交媒体平台**：一家社交媒体公司可能会在向所有用户部署之前，先向一小部分（如 1%）用户推出更新后的消息系统等新功能。这使他们能够在全面发布前小规模监控性能和用户反馈。
- **电子商务网站**：电子商务网站可能会向选定的用户群体引入新的结账流程，以确保它不会对转化率产生负面影响或引入可能干扰销售的新 **Bug**。
- **云服务**：云提供商在更新其服务时经常使用金丝雀测试。例如，他们可能会为有限数量的用户更新存储服务，以确保在更新所有区域之前没有性能降级或停机。
- **游戏**：在线游戏公司可以向一部分玩家推出新的游戏功能、补丁或更新。他们在将内容开放给所有玩家之前，监控游戏和服务器的稳定性以及新受众的接受程度。
- **移动应用**：当移动应用的新版本准备就绪时，开发人员可能会选择将其发布给一小部分用户或特定地区，以测试其在不同设备和各种网络条件下的性能。

在每种情况下，目标都是在拥有真实用户的类生产环境中验证更新，同时最大限度地降低大规模问题的风险。

#### 高级概念

- **金丝雀测试如何融入 DevOps 生命周期？**

金丝雀测试作为降低将新软件版本引入生产环境风险的一种策略，融入了 **DevOps 生命周期**中。它通常位于**持续交付**流水线的末端，在完成其他形式的**自动化测试**之后。一旦应用程序的新版本通过了单元测试、集成测试和其他测试，它就会被逐步推广到生产服务器或用户的一个小子集。这个小子集（即“金丝雀”组）在进行大规模部署之前接收更改。

在**持续部署**的背景下，金丝雀测试充当了最后的真实世界验证步骤。自动化监控工具观察金丝雀发布的行为，检查错误、性能回归或其他问题。如果金丝雀版本表现良好，新版本就可以放心地推广到生产环境的其余部分。如果出现问题，可以在对用户群影响最小的情况下回滚更改。

将金丝雀测试纳入 DevOps 生命周期使团队能够：
- **检测**在早期测试阶段未发现的问题。
- 通过仅向一小部分用户暴露缺陷来**限制潜在缺陷的影响**。
- 从生产环境中**收集反馈**和性能指标。
- 在全面部署前**增强对发布质量的信心**。

为了促进金丝雀测试，DevOps 团队经常使用**功能开关**、**流量路由机制**和**自动回滚能力**。这些工具和实践有助于管理金丝雀测试过程，并将其与 DevOps 工作流的其余部分无缝集成。

- **金丝雀测试如何与持续集成/持续部署 (CI/CD) 集成？**

将金丝雀测试与 **CI/CD** 流水线集成涉及几个战略步骤。首先，确保您的 CI/CD 工具支持**金丝雀部署**。像 Spinnaker、Argo Rollouts 或云特定服务等工具可以管理这一点。

在 CI/CD 流水线配置中，为金丝雀发布添加一个**部署阶段**。此阶段应将新版本部署到生产环境的**小子集**。使用 **基础设施即代码 (IaC)** 工具（如 Terraform 或 AWS CloudFormation）来定义金丝雀环境。

```yaml
stages:
  - name: Deploy Canary
    actions:
      - type: Deploy
        config:
          environment: Canary
```

接下来，定义成功**指标及标准**（如错误率或响应时间），并配置您的监控工具来跟踪这些指标。使用 **Prometheus**、**Datadog** 或类似工具进行实时监控。

```yaml
monitoring:
  - name: Error Rate
    threshold: '>5%'
  - name: Response Time
    threshold: '<200ms'
```

使用脚本或 CI/CD 工具中的集成解决方案自动化这些指标的**分析**。如果金丝雀符合成功标准，则自动化**推广 (Rollout)** 到生产环境的其余部分。如果不符合，则触发**回滚**。

```yaml
on_success:
  - name: Full Rollout
on_failure:
  - name: Rollback Canary
```

最后，确保您的流水线支持**通知**，以提醒团队注意金丝雀的表现和所采取的操作。

```yaml
notifications:
  - type: Slack
    on_failure: true
    on_success: true
```

通过遵循这些步骤，您可以有效地将金丝雀测试集成到 CI/CD 流程中，从而实现更安全的部署和更快的反馈循环。

- **金丝雀测试在微服务中的作用是什么？**

在微服务架构中，金丝雀测试在确保新功能、更新或修复安全地推向生产环境方面发挥着至关重要作用。通过将极少量的实时流量引导至微服务的新版本，开发人员可以在不影响整个用户群的情况下，在真实条件下监控并评估其性能和稳定性。由于微服务的分布式和解耦特性，这种针对性方法在微服务中特别有效，允许对单个服务进行隔离测试。

成功的金丝雀测试是通过对比金丝雀实例与稳定生产实例之间的关键**性能指标 (KPI)** 和指标来确定的。如果金丝雀表现符合预期或更好，新版本就可以逐步推广到其余流量。这种增量策略最小化了风险，并提供了在出现问题时快速回滚的机制。

实施金丝雀测试，您需要：
- 一个支持流量分割的部署系统。
- 用于跟踪和比较金丝雀性能的监控工具。
- 能够快速恢复的自动回滚能力。

通常，金丝雀测试在 CI/CD 流水线中自动进行，利用功能开关、服务网格基础设施或云提供商服务来控制流量流并自动执行回滚。将金丝雀测试集成到 CI/CD 和 DevOps 实践中可以确保在有安全网的情况下进行持续交付，这符合增量变更和快速反馈的原则。

- **金丝雀测试在云环境中是如何工作的？**

云环境中的金丝雀测试涉及在全面部署之前逐步向一小部分用户推出更改。这种方法利用了云基础设施的灵活性和可扩展性。其典型工作方式如下：
1. **部署**：将应用程序的新版本部署到云环境内有限数量的服务器或容器中，且确保它们与生产环境隔离。
2. **重定向**：使用基于云的负载均衡器或流量管理工具，将极小百分比的用户流量引导到金丝雀实例。
3. **监控**：密切监控金丝雀的性能，利用云监控和日志服务跟踪响应时间、错误率和系统健康状况等指标。
4. **评估**：根据既定的成功标准评估金丝雀的行为，这可以包括自动性能检查和错误率阈值。
5. **表现良好**：如果金丝雀表现良好，在继续监控的同时逐渐增加导向它的流量。如果出现问题，通过重定向流量避开金丝雀来快速**回滚**。
6. **全面推广**：一旦金丝雀被认为稳定，则继续进行**全面推广**到所有用户，替换云环境中的旧版本。

云平台提供了自动化这些步骤的工具，例如用于部署的基础设施即代码 (IaC)，以及用于评估的集成监控和分析服务。以编程方式控制资源的能力使金丝雀测试成为云原生应用程序的天作之合，从而实现软件交付的快速**迭代**和韧性。

- **金丝雀测试与 A/B 测试之间是什么关系？**

金丝雀测试和 **A/B 测试**都是通过在全面推出前使用子集用户验证更改来降低风险的技术。然而，它们的关系在于其不同的目标和方法论。

**金丝雀测试**主要关注于在生产环境中通过逐步推广到一小部分受控用户群，来**识别新功能或服务的潜在问题**。其目标是在真实条件下监控带有新更改的系统行为，并在问题影响所有用户之前尽早捕捉到它们。

另一方面，**A/B 测试**用于**根据用户行为做出数据驱动的决策**。它涉及比较一个功能的两个或多个版本，看哪个版本在特定指标（如用户参与度或转化率）方面表现更好。用户被随机分配到不同组，每组体验该功能的不同版本。

虽然这两种技术都涉及向一部分用户暴露功能，但**金丝雀测试更侧重于确保生产环境的稳定性和性能**，而 **A/B 测试则侧重于理解用户偏好并优化用户体验**。它们可以互补；例如，一个功能可能首先经过金丝雀测试以确保其稳定，然后通过 A/B 测试来精炼其对用户行为的影响。结合使用这些策略可以实现稳健且用户优化的软件发布。
