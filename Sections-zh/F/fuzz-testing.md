# 模糊测试 (Fuzz Testing)
[模糊测试 (Fuzz Testing)](#模糊测试)

### 相关术语：
- [安全测试 (Security Testing)](/glossary/security-testing)
- [渗透测试 (Penetration Testing)](/glossary/penetration-testing)

### 参见：
- [Wikipedia](https://en.wikipedia.org/wiki/Fuzzing)

---

## 关于模糊测试的问题？

#### 基础与重要性
- **什么是模糊测试？**
**模糊测试 (Fuzz Testing)**，也称为 **Fuzzing**，是一种软件测试技术，通过向计算机程序提供无效、非预期或随机数据作为输入，并监控程序的异常情况（如崩溃、内建断言失败或内存泄漏）。
它特别擅长发现那些系统未设计处理畸形输入而导致的编码错误和安全漏洞。

- **实现方式**：
    *   **基于生成 (Generation-based)**：根据预定义模式或模型创建全新输入。
    *   **基于变异 (Mutation-based)**：通过修改现有有效输入来生成新用例。

- **为什么模糊测试很重要？**
它能暴露传统方法可能遗漏的漏洞，特别是处理恶意输入时的**安全性漏洞**、**内存泄漏**和导致**崩溃的 Bug**。自动化 fuzzing 能高速模拟海量边界情况，这是手工测试无法比拟的。

- **与其他测试的区别**：
    *   **对比单元/集成测试**：模糊测试是随机且无结构的，而前者是有预定义规范的。
    *   **对比功能测试**：功能测试验证“该做什么”，模糊测试则是对处理混乱输入的能力进行**压力测试**。
    *   **对比渗透测试**：渗透测试是针对性的攻击模拟，模糊测试则是更广泛、自动化的漏洞挖掘手段。

#### 收益与常见缺陷
- **主要收益**：发现非预期漏洞、自动化错误检测、提升代码健壮性、满足行业安全标准、易于集成到 CI/CD 流程。
- **能识别的错误类型**：
    *   **缓冲区溢出 (Buffer overflows)**。
    *   **内存泄漏 (Memory leaks)**。
    *   **未处理的异常 (Unhandled exceptions)**。
    *   **输入验证漏洞**（如 XSS、注入攻击）。
    *   **竞态条件 (Race conditions)**。

#### 实现与技术
- **基本流程**：
定义范围 -> 选择技术（生成或变异） -> 生成用例 -> 自动化执行 -> 监控与记录 -> 失败分析 -> 迭代优化。

- **进阶技术**：
    *   **智能模糊测试 (Smart Fuzzing)**：理解输入结构，利用启发式方法提高发现概率。
    *   **协议/文件格式模糊测试**：针对特定通信协议或文件结构。
    *   **进化模糊测试 (Evolutionary Fuzzing)**：利用遗传算法最大化代码覆盖率。
    *   **内存中模糊测试 (In-memory Fuzzing)**：直接在内存空间执行，速度极快。

- **常用工具**：
    *   **AFL (American Fuzzy Lop)**：基于遗传算法，导向代码覆盖率。
    *   **libFuzzer**：库级别，适合 C/C++。
    *   **ClusterFuzz**：Google 出品的分布式大规模 fuzzing 基础设施。
    *   **syzkaller**：针对操作系统内核。

#### 挑战与局限性
- **挑战**：资源消耗大（CPU/内存）、结果解释复杂（需区分误报）、需要专门的隔离环境、深入代码路径耗时长。
- **局限性**：难以发现深层逻辑缺陷、可能存在误报/漏报、设置复杂度高。
- **度量指标**：代码覆盖率、Bug 发现率、碰撞唯一性 (Crash Uniqueness)、漏洞严重性分数 (CVSS)。

- **CI/CD 集成建议**：
选择支持命令行/API 的工具，编写专门的 fuzz target，设置合理的运行时间限制，并将发现的问题自动对接到 Bug 追踪系统。
