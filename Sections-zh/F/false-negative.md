# 漏报 (False Negative)
[漏报](#漏报)

### 相关术语：
- [误报 (False Positive)](/glossary/false-positive)

---

## 关于漏报的问题？

#### 基础与理解
- **什么是软件测试中的“漏报” (False Negative)？**
在软件测试中，**漏报 (False Negative)** 指的是测试用例错误地通过了，未能检测到确实存在的缺陷。这意味着有缺陷的代码被推向生产环境，可能导致运行问题并损害用户体验。
处理漏报通常涉及：调查根本原因、修正测试用例或环境设置、重新测试以确认问题已被捕获、审查相关用例，并更新测试策略以防再次发生。

- **漏报与误报 (False Positive) 有何不同？**
    - **漏报 (False Negative)**：测试本该失败却通过了（缺陷未被发现）。风险更高，可能导致 Bug 进入生产环境。
    - **误报 (False Positive)**：测试本该通过却失败了（功能正常但报错）。会导致浪费时间去调试不存在的问题，削弱团队对自动化测试的信任。

- **漏报的潜在原因**：
    - **测试数据不当**：数据不具代表性，未触发缺陷场景。
    - **断言编写薄弱**：断言过于宽泛（如只检查类型而不检查具体值），未能反映真实需求。
    - **时序问题**：异步操作处理不当，测试在结果生成前就过早判定通过。
    - **环境差异**：测试环境与生产环境的不一致导致特定缺陷无法暴露。
    - **测试过时**：代码变更后，陈旧的测试未能覆盖新的逻辑分支。
    - **人为错误**：测试设计或结果解读时的疏忽。

#### 影响与后果
- **对测试流程的影响**：
漏报会给人一种“假安全感”，削弱对测试过程的信任。随着时间推移，如果利益相关者认为测试不可靠，他们可能会降低对测试基础设施的投入。此外，漏报还会干扰回归测试，并与敏捷中的“快速失败 (Fail Fast)”原则相悖。

- **常见案例**：
    - **不完整的断言**：计算总价的测试只检查了结果是否为数字，而没检查具体数值是否正确。
    - **Mock/Stub 问题**：过度模拟导致测试在模拟环境中通过，但在真实 API 下存在缺陷。
    - **不稳定的测试 (Flaky Tests)**：测试时而通过时而失败，在某次运行时碰巧通过，掩盖了真实的 Bug。

#### 预防与处理
- **如何预防漏报？**
    - **定期审查与重构**：确保用例与当前应用逻辑同步。
    - **提升数据质量**：使用更贴近真实的脱敏数据。
    - **精准断言**：避免使用非特异性断言，确保结果精确匹配。
    - **代码评审**：对测试脚本进行同行评审。
    - **监控测试不稳定性**：追踪并修复随机失败的用例。

- **发现漏报后应采取的步骤**：
分析根因 -> 修正脚本或环境 -> 更新用例以精准捕获该故障 -> 重新运行确认 -> 文档记录并分享教训。

- **自动化与 QA 的作用**：
自动化通过提供一致的执行和环境设置来减少人为疏忽导致的漏报。然而，QA 团队必须负责维护其健壮性，包括进行覆盖率分析、数据维护和配置管理，确保自动化套件始终具有探测缺陷的灵敏度。

#### 高级概念
- **与测试覆盖率的关系**：
漏报会削弱覆盖率的有效性。高覆盖率可能给人一种稳定的错觉，但如果测试断言不力，即使代码行被执行了，缺陷仍可能隐匿其中。

- **对敏捷与 CI/CD 的冲击**：
在 CI/CD 流水线中，漏报可能导致不稳定的构建被发布，增加了热修复 (hotfix) 的成本和风险。它破坏了快速反馈循环，延迟了问题的识别。
