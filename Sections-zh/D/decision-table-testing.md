# 判定表测试 (Decision Table Testing)
[判定表测试](#判定表测试)

## 关于判定表测试的问题？

#### 基础与重要性
- **什么是判定表测试？**
**判定表测试 (Decision Table Testing)** 是一种系统化的方法，用于捕获复杂的商业规则并验证其在软件应用程序中的实现。它通过将**条件 (Conditions)** 和**操作 (Actions)** 列表化，确保所有组合都得到覆盖和测试。这种方法对于可以用表格形式表达逻辑关系的各种功能非常有效。
**判定表**封装了输入（条件）及其对应的输出（操作），允许测试人员识别出能够覆盖全方位决策逻辑的**测试用例**。这种测试对于验证多条件系统至关重要，确保没有遗漏任何条件组合。
创建判定表包括识别条件和操作，然后用所有可能的组合填充表格。执行则是通过针对应用程序系统地测试每个组合来进行的。
Excel、TestComplete 或专门的判定表软件等工具可以简化这一过程，部分工具还提供自动化功能。**自动化判定表测试**可以利用测试自动化框架集成到持续集成流水线中。
在涉及大量相互依赖变量的场景中（如财务计算或基于规则的系统），判定表测试通过提供清晰、有组织的方法来验证复杂逻辑，表现尤为出色。
挑战包括管理具有许多条件的大型表格以及确保表格的完整性。这些可以通过将复杂表格分解为较简单的表格，并使用软件工具来管理和执行测试来缓解。
当处理条件极少的简单系统，或者创建表格的工作量超过其结构化方法带来的收益时，应避免使用判定表测试。

- **为什么判定表测试在软件测试中很重要？**
判定表测试在**软件测试**中至关重要，因为它能够系统地检查**复杂的决策逻辑**。通过映射出输入及其对应输出的每种可能组合，测试人员可以确保覆盖所有场景，这对于具有大量相互依赖变量和规则的系统尤为重要。
这种方法在识别需求缺口或被忽视的条件方面非常有效，从而能够对应用程序行为进行更彻底的验证。它还有助于发现那些在其他测试技术中可能不会立即显现的**隐藏缺陷**，特别是在处理错综复杂的商业规则时。
此外，判定表测试支持利益相关者之间的**清晰沟通**，因为表格提供了业务逻辑的视觉化和结构化表示，技术和非技术团队成员都能轻易理解。
在**可维护性**方面，当业务规则发生变化时，更新这些表格相对直接，使其成为**回归测试**的宝贵资产。它们有助于确保系统的修改不会引入新错误或破坏现有功能。
最后，判定表测试有利于**测试自动化**，因为判定表可以直接转化为自动化的测试脚本。这种自动化进一步增强了测试过程的效率和可重复性，从而实现快速反馈和 DevOps 环境中的持续集成。

- **判定表的核心组成部分是什么？**
判定表的核心组成部分包括：
    - **条件 (Conditions)**：可能影响结果的输入或原因。它们代表不同的**测试场景**。
    - **操作 (Actions)**：由条件产生的输出或影响。它们代表系统在某些条件下的响应或行为。
    - **条件桩 (Condition Stubs)**：将被测试的条件的具体实例或变量。
    - **操作桩 (Action Stubs)**：为响应条件桩而产生的具体实例或操作。
    - **规则 (Rules)**：判定表的各列，代表条件桩的唯一组合以及应执行的相应操作桩。
    - **条件项 (Condition Entries)**：表格中的单元格，测试人员在此指定某个条件对于特定规则是真 (T) 还是假 (F)。
    - **操作项 (Action Entries)**：指示当满足规则条件时应采取哪种操作的单元格。
判定表中的每条规则本质上都是一个**测试用例**。通过覆盖条件和操作的所有可能组合，判定表确保了对复杂商业规则和决策过程的全面测试。

- **判定表测试与其他类型的软件测试有何不同？**
判定表测试通过将各种输入组合映射到其预期结果，独特地解决了具有**复杂业务逻辑**的场景。与**单元测试**（侧重于单个组件）或**集成测试**（确保组件协同工作）不同，判定表测试特别擅长验证具有大量相互依赖变量和规则的系统。
与依赖测试人员创造力和经验的**探索性测试**相比，判定表测试是系统化且详尽的。它确保考虑到所有可能的组合，降低了遗漏边缘案例的风险。
虽然**边界值**和**等价类划分**技术侧重于输入值范围和将具有相似结果的输入进行分组，但判定表测试更进一步，检查不同输入组合的影响，使其在某些背景下更为全面。
与**状态转换测试**（重点在于系统如何从一个状态转换到另一个状态）相比，判定表测试为验证不同输入状态如何以表格形式影响系统行为提供了清晰的结构。
它与**用户验收测试 (UAT)** 的区别在于它更具颗粒度和技术性，通常在开发过程的早期阶段用于在 UAT 开始前优化业务逻辑。
总体而言，判定表测试处理复杂决策逻辑的结构化方法使其脱颖而出，对于验证具有错综复杂规则和多个决策点的系统是必不可少的。

#### 实现与执行
- **如何创建和执行判定表？**
1. **识别条件和操作**：确定与被测规则相关的所有可能输入（条件）和输出（操作）。
2. **构建表格**：创建一个以条件为行、案例（条件组合）为列的表格。在随后的行中列出操作。
3. **填充表格**：对于每个案例，用 Y (Yes) 表示要执行的操作，用 N (No) 表示不执行的操作。
4. **简化表格**：应用规则合并相似案例，降低复杂性。
5. **转化为测试用例**：将每一列转换为具有指定输入和**预期结果**的**测试用例**。
6. **执行测试用例**：针对系统自动或手动运行测试用例。
7. **验证结果**：检查系统的实际输出是否与判定表中的预期结果相符。
8. **根据需要进行优化**：针对规则变更或新增场景更新判定表。

代码示例（判定表逻辑逻辑）：
```javascript
function executeDecisionTable(caseId) {
  switch (caseId) {
    case 'case1':
      return actionA() && actionB();
    case 'case2':
      return actionB() && actionC();
    default:
      throw new Error('无效的案例 ID');
  }
}
```

- **判定表测试涉及哪些步骤？**
1. **识别测试场景**：确定要测试的功能及相关的业务规则或条件。
2. **定义条件和操作**：列出所有可能的条件以及基于这些条件发生的操作。
3. **构建判定表**：创建表格，以条件为行，测试用例为列。
4. **简化表格**：寻找冗余或矛盾并将其移除以简化表格。
5. **确定测试用例**：简化表中的每一列代表一个测试用例。
6. **编写测试脚本**：开发与识别出的测试用例相对应的自动化测试脚本。
7. **执行测试**：运行脚本验证软件行为。
8. **审查结果**：分析执行结果。
9. **报告缺陷**。
10. **优化测试**：根据结果和规则变更更新判定表。

- **可以用于判定表测试的工具有哪些？**
    - **CA Agile Requirements Designer**：对需求进行建模并自动生成用例。
    - **IBM Rational DOORS**：支持判定表创建的需求管理工具。
    - **Hexawise**：生成优化的测试计划，最大化覆盖率。
    - **Tricentis Tosca**：提供基于模型的测试自动化，包含判定表能力。
    - **Katalon Studio**：支持数据驱动测试。
    - **FitNesse**：开源工具，允许在判定表中定义示例并作为验收测试自动化。

#### 场景与用例
- **特别有用的场景示例？**
例如贷款审批系统。审批决定基于信用评分、收入水平、就业状态等多个标准。
| 信用评分 | 收入水平 | 就业状态 | 预期预期决定 |
|----------|----------|----------|--------------|
| 高       | 任意     | 稳定工作 | 批准         |
| 低       | 高       | 任意     | 批准（高利率）|
| 低       | 低       | 任意     | 拒绝         |
| 高       | 任意     | 失业     | 批准（需担保人）|

#### 挑战与局限性
- **挑战**：
    - **复杂性**：变量增加，组合呈指数级增长。
    - **维护**：规则变更时手动更新繁琐。
    - **疏忽**：可能遗漏重要条件。
    - **冗余**：可能存在重复组合。
    - **范围限制**：不适合非表格逻辑。
- **应对方式**：
    - **模块化**：分解复杂规则。
    - **版本控制与自动化回归**。
    - **测试优化技术**：如结对测试 (Pairwise testing)。
    - **同行评审**。
