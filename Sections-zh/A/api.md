# API

<!-- TOC START -->
- [相关术语：](#相关术语：)
  - [另请参阅：](#另请参阅：)
- [有关 API 的问题吗？](#有关-api-的问题吗？)
  - [基础知识和重要性](#基础知识和重要性)
    - [什么是 API 以及它如何工作？](#什么是-api-以及它如何工作？)
    - [为什么 API 在软件开发中很重要？](#为什么-api-在软件开发中很重要？)
    - [API 有哪些不同类型？](#api-有哪些不同类型？)
    - [Web API 和库 API 有什么区别？](#web-api-和库-api-有什么区别？)
    - [API 在微服务架构中的作用是什么？](#api-在微服务架构中的作用是什么？)
  - [API设计与开发](#api设计与开发)
    - [设计 API 的最佳实践是什么？](#设计-api-的最佳实践是什么？)
    - [如何对 API 进行版本控制？](#如何对-api-进行版本控制？)
    - [什么是 API 优先设计以及为什么它很重要？](#什么是-api-优先设计以及为什么它很重要？)
    - [开发 API 时主要考虑哪些因素？](#开发-api-时主要考虑哪些因素？)
    - [API 网关的作用是什么？](#api-网关的作用是什么？)
  - [API 测试](#api-测试)
    - [什么是 API 测试以及为什么它很重要？](#什么是-api-测试以及为什么它很重要？)
    - [API 测试有哪些不同类型？](#api-测试有哪些不同类型？)
    - [API测试常用哪些工具？](#api测试常用哪些工具？)
    - [API 测试的关键步骤是什么？](#api-测试的关键步骤是什么？)
    - [如何自动化 API 测试？](#如何自动化-api-测试？)
  - [API 安全](#api-安全)
    - [与 API 相关的常见安全风险有哪些？](#与-api-相关的常见安全风险有哪些？)
    - [如何保护 API 的安全？](#如何保护-api-的安全？)
    - [什么是 API 密钥身份验证？](#什么是-api-密钥身份验证？)
    - [什么是 OAuth 以及它如何在 API 安全中使用？](#什么是-oauth-以及它如何在-api-安全中使用？)
    - [SSL/TLS 在 API 安全中的作用是什么？](#ssltls-在-api-安全中的作用是什么？)
  - [API 文档](#api-文档)
    - [为什么 API 文档很重要？](#为什么-api-文档很重要？)
    - [好的 API 文档中应该包含哪些内容？](#好的-api-文档中应该包含哪些内容？)
    - [有哪些工具可用于创建 API 文档？](#有哪些工具可用于创建-api-文档？)
    - [API 文档应该多久更新一次？](#api-文档应该多久更新一次？)
    - [API 文档在 API 测试中的作用是什么？](#api-文档在-api-测试中的作用是什么？)
<!-- TOC END -->

应用程序编程接口（

应用程序编程接口

）是一组允许两个应用程序进行通信的规则。本文中的术语“应用程序”表示具有特定功能的任何软件。这

应用程序编程接口

定义这些应用程序如何发送和接收请求和响应。

## 相关术语：

- [API Testing](../A/api-testing.md)
- [Microservices Testing](../M/microservices-testing.md)

### 另请参阅：

- [Wikipedia](https://en.wikipedia.org/wiki/API)

## 有关 API 的问题吗？

### 基础知识和重要性

#### 什么是 API 以及它如何工作？

**[API](../A/api.md)**（应用程序编程接口）是一组用于构建软件应用程序的协议、例程和工具。它指定软件组件应如何交互，从而允许不同的系统相互通信。 [API](../A/api.md) 充当中间层，处理请求并确保企业系统的无缝运行。
  [APIs](../A/api.md) 通过互联网上的 **“调用”** 或 **“请求”** 进行操作，数据通常以 JSON 或 XML 等格式进行交换。当向 [API](../A/api.md) 发出请求时，它会执行预定义的操作并返回响应。这可以包括数据检索、更新或其他 CRUD（创建、读取、更新、删除）操作。
  以下是如何使用 `fetch` 函数在 JavaScript 中调用 [API](../A/api.md) 的基本示例：

  ```
  fetch('https://api.example.com/data', {
    method: 'GET',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer Your-API-Key'
    }
  })
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));
  ```在此示例中，使用`GET` 请求调用`https://api.example.com/data` 处的[API](../A/api.md) 以检索数据。 `fetch` 函数处理 HTTP 请求，处理响应并将其记录到控制台。标头通常包含内容类型和授权信息，确保 [API](../A/api.md) 识别并允许请求。

#### 为什么 API 在软件开发中很重要？

[APIs](../A/api.md) 在软件开发中对于**实现不同软件组件或系统之间的通信**至关重要。它们充当**合同**，规定软件元素如何交互，确保某一部分的更改不会破坏其他部分的功能。这种**解耦**允许**模块化**，使设计、开发和维护应用程序变得更加容易。
  [APIs](../A/api.md) 促进**可重用性**，允许开发人员利用现有功能，而无需重新发明轮子。它们还支持**可扩展性**，因为服务可以独立扩展以满足需求。在 [test automation](../T/test-automation.md) 的上下文中，[APIs](../A/api.md) 对于 **[integration testing](../I/integration-testing.md)** 很有帮助，确保应用程序的不同部分按预期协同工作。
  此外，[APIs](../A/api.md) 是**持续集成/持续部署 (CI/CD)** 管道的关键，允许自动化工具与正在开发的软件进行交互，从而加快发布过程。它们还提供了一种**监控和健康检查**的方法，这对于维护实时系统的可靠性至关重要。
  总之，[APIs](../A/api.md) 是现代软件开发的支柱，支持**通信**、**模块化**、**可重用性**、**可扩展性**和**自动化**。它们对于创建复杂、健壮且高效的软件系统是不可或缺的。

#### API 有哪些不同类型？

[APIs](../A/api.md) 有多种形式，每种形式都有不同的用途。以下是[APIs](../A/api.md) 的不同类型：

- **REST（表述性状态传输）**：使用 HTTP 请求来 GET、PUT、POST 和 DELETE 数据。它是无状态的，并使用标准 HTTP 状态代码来指示请求的成功或失败。
  - **SOAP（简单对象访问协议）**：依赖基于 XML 的消息传递协议来交换信息。它与协议无关，并且具有内置的错误处理功能。
  - **GraphQL**：允许客户端仅请求他们需要的数据，使其对于具有许多实体和关系的复杂系统非常高效。
  - **gRPC（Google 远程过程调用）**：使用协议缓冲区作为接口定义语言，专为高性能 RPC 通信而设计，特别适合微服务。
  - **OData（开放数据协议）**：使用 RESTful [APIs](../A/api.md) 标准化数据的查询和更新。它对于通过网络公开和使用数据非常有用。
  - **JSON-RPC 和 XML-RPC**：两者都是分别以 JSON 和 XML 编码的远程过程调用协议。它们允许发送多个参数并以结构化格式接收结果。
  - **WebSocket**：通过单个 TCP 连接提供全双工通信通道，实现客户端和服务器之间的实时数据传输。
  每种类型的 [API](../A/api.md) 都有自己的一套标准以及实施和测试的最佳实践。了解各自的特征对于有效[test automation](../T/test-automation.md) 至关重要。

- **REST（表述性状态传输）**：使用 HTTP 请求来 GET、PUT、POST 和 DELETE 数据。它是无状态的，并使用标准 HTTP 状态代码来指示请求的成功或失败。
  - **SOAP（简单对象访问协议）**：依赖基于 XML 的消息传递协议来交换信息。它与协议无关，并且具有内置的错误处理功能。
  - **GraphQL**：允许客户端仅请求他们需要的数据，使其对于具有许多实体和关系的复杂系统非常高效。
  - **gRPC（Google 远程过程调用）**：使用协议缓冲区作为接口定义语言，专为高性能 RPC 通信而设计，特别适合微服务。
  - **OData（开放数据协议）**：使用 RESTful [APIs](../A/api.md) 标准化数据的查询和更新。它对于通过网络公开和使用数据非常有用。
  - **JSON-RPC 和 XML-RPC**：两者都是分别以 JSON 和 XML 编码的远程过程调用协议。它们允许发送多个参数并以结构化格式接收结果。
  - **WebSocket**：通过单个 TCP 连接提供全双工通信通道，实现客户端和服务器之间的实时数据传输。

#### Web API 和库 API 有什么区别？

**web [API](../A/api.md)** 是一个允许不同软件系统通过互联网进行通信的接口，通常使用 HTTP/HTTPS 协议。它使服务和客户端能够通过 Web 请求和响应（通常采用 JSON 或 XML 格式）交换数据和功能。 Web [APIs](../A/api.md) 旨在远程访问并支持基于网络的交互。
  另一方面，**库[API](../A/api.md)**是库提供的一组函数、类或协议，它是计算机程序使用的非易失性资源的集合。这些[APIs](../A/api.md) 旨在直接在软件中使用，不会通过网络公开。它们为开发人员提供了一种利用预定义功能的方法，而无需从头开始编写代码，从而确保代码重用和模块化。
  总之，主要区别在于它们的使用上下文：web [APIs](../A/api.md) 用于**通过网络进行系统间通信**，而库[APIs](../A/api.md) 用于**应用程序代码库中的内部使用**。

  ```
  // Example of a web API call using fetch in JavaScript
  fetch('https://api.example.com/data')
    .then(response => response.json())
    .then(data => console.log(data));
  // Example of using a library API in JavaScript
  const moment = require('moment');
  let formattedDate = moment().format('YYYY-MM-DD');
  console.log(formattedDate);
  ```

#### API 在微服务架构中的作用是什么？

在**微服务架构**中，[APIs](../A/api.md) 充当服务之间的**主要通信通道**，使每个服务能够独立运行，同时仍然是内聚系统的一部分。它们允许服务无缝地**交换数据**和**功能**，而无需共享代码或实现细节。
  微服务中的[APIs](../A/api.md) 被设计为**轻量级**和**集中**，通常围绕特定的业务功能。这符合**单一责任**的原则，其中每个微服务负责不同的功能或流程。
  在这种情况下使用 [APIs](../A/api.md) 支持**服务可扩展性**和**灵活性**，因为服务可以独立开发、部署和扩展。 [APIs](../A/api.md) 促进服务的**松散耦合**，这对于能够处理微服务的动态性质（例如频繁更新和服务故障）的弹性系统至关重要。
  此外，[APIs](../A/api.md) 支持**多语言编程**，允许使用最适合其功能的不同编程语言编写服务。这是可能的，因为[APIs](../A/api.md) 提供了一个与语言无关的交互界面。
  总之，[APIs](../A/api.md) 是微服务架构不可或缺的一部分，为服务提供了一种交互机制，同时保持一定程度的**隔离**和**自治**，支持微服务的敏捷性、可扩展性和弹性目标。

### API设计与开发

#### 设计 API 的最佳实践是什么？

设计 [API](../A/api.md) 时，请遵循以下最佳实践：

- **一致性**
    是关键。确保端点命名、请求/响应结构和错误处理在整个 API 中是统一的。

- **宁静的原则**
    应在适用时指导设计，适当使用 HTTP 方法（GET 用于检索，POST 用于创建等）。

- **使用名词**
    对于资源名称和
    **动词**
    为了行动。避免在 URL 中使用动词。

- **版本控制**：实施 API 版本控制以避免对客户端造成重大更改。使用简单的版本控制方案，例如 URL 路径或标头。
  - **分页**：对于大型集合，使用分页来限制响应大小，提供更好的客户端体验。
  - **过滤、排序和搜索** ：允许客户端通过查询参数过滤、排序和搜索数据。
  - **速率限制**：通过实施速率限制来保护 API 免遭滥用和过度使用。
  - **缓存**：使用 HTTP 缓存标头来提高性能并减少服务器负载。
  - **安全**：实现身份验证、授权和加密。使用令牌或 OAuth 进行安全访问。
  - **错误处理**：提供有意义的 HTTP 状态代码和错误消息。包含唯一的错误标识符，以便更轻松地进行故障排除。
  - **内容协商**：支持多种格式（如 JSON 和 XML）并使用
    `Accept`
    用于格式选择的标题。

- **文档**：保持最新并提供清晰、简洁的示例。使用 Swagger 或 API 蓝图等工具。
  - **反馈循环**：鼓励并促进 API 消费者的反馈，以不断改进 API。

  ```
  // Example of a RESTful endpoint for retrieving a user
  GET /api/v1/users/{id}
  ```请记住，我们的目标是创建一个易于理解、集成和维护的[API](../A/api.md)。

- **一致性**
    是关键。确保端点命名、请求/响应结构和错误处理在整个 API 中是统一的。

- **宁静的原则**
    应在适用时指导设计，适当使用 HTTP 方法（GET 用于检索，POST 用于创建等）。

- **使用名词**
    对于资源名称和
    **动词**
    为了行动。避免在 URL 中使用动词。

- **版本控制**：实施 API 版本控制以避免对客户端造成重大更改。使用简单的版本控制方案，例如 URL 路径或标头。
  - **分页**：对于大型集合，使用分页来限制响应大小，提供更好的客户端体验。
  - **过滤、排序和搜索** ：允许客户端通过查询参数过滤、排序和搜索数据。
  - **速率限制**：通过实施速率限制来保护 API 免遭滥用和过度使用。
  - **缓存**：使用 HTTP 缓存标头来提高性能并减少服务器负载。
  - **安全**：实现身份验证、授权和加密。使用令牌或 OAuth 进行安全访问。
  - **错误处理**：提供有意义的 HTTP 状态代码和错误消息。包含唯一的错误标识符，以便更轻松地进行故障排除。
  - **内容协商**：支持多种格式（如 JSON 和 XML）并使用
    `Accept`
    用于格式选择的标题。

- **文档**：保持最新并提供清晰、简洁的示例。使用 Swagger 或 API 蓝图等工具。
  - **反馈循环**：鼓励并促进 API 消费者的反馈，以不断改进 API。

#### 如何对 API 进行版本控制？

对 [API](../A/api.md) 进行版本控制对于维护兼容性和通知用户更改至关重要。这是一个简洁的指南：
  **语义版本控制 (SemVer)** 是一种流行的方案：`MAJOR.MINOR.PATCH` 格式，您可以在其中递增：

- `MAJOR`
    当您进行不兼容的 API 更改时的版本，

- `MINOR`
    当您以向后兼容的方式添加功能时的版本，以及

- `PATCH`
    当您进行向后兼容的错误修复时。
  **URI 版本控制** 涉及在[API](../A/api.md) 端点路径中包含版本号，例如`/v1/resource`。
  **参数版本控制**使用请求参数来指定版本，例如`?version=1`。
  **标头版本控制** 利用自定义 HTTP 标头来指示版本。
  **媒体类型版本控制** 使用自定义媒体类型指定 `Accept` 标头中的版本。
  选择符合您[API](../A/api.md) 的需求和消费者期望的版本控制策略。通过**变更日志**清楚地传达变更，并确保文档与[API](../A/api.md)一起更新。
  对于[backward compatibility](../B/backward-compatibility.md)，请考虑同时支持多个版本或提供**弃用策略**，以便让消费者有时间进行迁移。
  以下是使用 URI 版本控制的版本化 [API](../A/api.md) 端点的示例：

  ```
  GET /v2/users/123
  Host: api.example.com
  ```请记住在 [API](../A/api.md) 中保持版本控制策略**一致**，以避免混淆。

- `MAJOR`
    当您进行不兼容的 API 更改时的版本，

- `MINOR`
    当您以向后兼容的方式添加功能时的版本，以及

- `PATCH`
    当您进行向后兼容的错误修复时。

#### 什么是 API 优先设计以及为什么它很重要？

[API](../A/api.md)-first 设计是一种在实现核心应用程序之前优先开发 **[APIs](../A/api.md)** 的方法。该策略将 [APIs](../A/api.md) 视为软件开发过程中的“一等公民”。
  这种设计理念很重要，因为它确保[APIs](../A/api.md)：

- **一致且可重复使用**
    ，使各种客户端应用程序的使用效率更高。

- **明确定义**
    ，这有助于为软件组件如何交互制定明确的合同。

- **易于测试**
    ，因为它们是从头开始设计的，具有可以独立验证的端点。

- **灵活**
    ，以便将来更轻松地与其他服务和系统集成。

- **可扩展**
    ，因为它们可以被开发来处理增加的负载，而无需对核心应用程序进行重大更改。
  通过采用[API](../A/api.md)-first 设计，组织可以加速其**进入市场**策略，因为前端和后端团队可以并行工作。它还为开发人员、测试人员和业务利益相关者提供了一个更加**协作的环境**，以便在开发周期的早期就 [API](../A/api.md) 的目的和功能保持一致。
  在 **[test automation](../T/test-automation.md)** 的背景下，[API](../A/api.md)-first 设计通过提供稳定且记录良好的端点来简化自动化测试的创建。这使得 [test automation](../T/test-automation.md) 工程师能够编写更不脆弱的测试，并且更专注于验证业务逻辑，而不是处理 UI 更改或其他前端问题。

- **一致且可重复使用**
    ，使各种客户端应用程序的使用效率更高。

- **明确定义**
    ，这有助于为软件组件如何交互制定明确的合同。

- **易于测试**
    ，因为它们是从头开始设计的，具有可以独立验证的端点。

- **灵活**
    ，以便将来更轻松地与其他服务和系统集成。

- **可扩展**
    ，因为它们可以被开发来处理增加的负载，而无需对核心应用程序进行重大更改。

#### 开发 API 时主要考虑哪些因素？

开发[API](../A/api.md) 时，**一致性**对于[maintainability](../M/maintainability.md) 和可用性至关重要。确保跨端点的命名约定、请求/响应格式和行为一致。
  **性能**必须优化；设计高效的数据检索，并考虑实施缓存、分页和压缩以减少延迟。
  **可扩展性**至关重要；使用负载平衡和水平扩展策略设计您的[API](../A/api.md) 以优雅地处理用户和数据量的增长。
  **错误处理**应该是健壮的，提供有意义的 HTTP 状态代码和错误消息，使客户端能够理解和解决问题。
  **版本控制**对于[backward compatibility](../B/backward-compatibility.md) 至关重要；使用明确的策略（例如 URI 路径或基于标头的版本控制）来管理更改，而不会中断客户端。
  **安全**至关重要；实施身份验证、授权、输入验证和速率限制以防止常见漏洞。
  **文档**应该全面且最新，提供清晰的示例和解释，以方便开发人员轻松集成。
  **测试**是没有商量余地的；编写自动化测试来覆盖各种场景，包括成功路径、失败和边缘情况。
  **弃用政策**应该明确，为客户提供重大变更的提前通知和足够的时间来适应。
  **监控和记录**对于维持健康[API](../A/api.md)至关重要；跟踪使用模式、性能指标和错误以主动管理[API](../A/api.md)。
  **用户反馈**非常宝贵；与您的[API](../A/api.md) 消费者互动，收集见解并根据他们的体验确定改进的优先顺序。

#### API 网关的作用是什么？

**[API](../A/api.md) 网关**充当反向代理，接受所有应用程序编程接口 ([API](../A/api.md)) 调用，聚合实现这些调用所需的各种服务，并返回适当的结果。在**微服务架构**中，它充当所有客户端的单个入口点，将请求路由到适当的微服务。
  [API](../A/api.md) 网关可以处理**横切问题**，例如：

- **身份验证和授权**：验证身份并确保调用者有权访问服务。
  - **速率限制**：控制用户在给定时间范围内可以发出的请求数量以防止滥用。
  - **负载平衡**：跨多个后端服务分配传入的 API 流量，以确保可扩展性和可靠性。
  - **缓存**：存储经常访问的数据的副本，以缩短响应时间并减少后端负载。
  - **请求整形和协议转换**：根据需要修改请求并在不同的 Web 协议之间进行转换。
  对于[test automation](../T/test-automation.md) 工程师，[API](../A/api.md) 网关引入了针对 **[test strategy](../T/test-strategy.md)** 的额外注意事项。测试应考虑网关的行为，包括它如何路由流量和应用策略。自动化测试可能需要模拟网关的操作或绕过它来直接测试各个微服务。
  总之，[API](../A/api.md) 网关是管理微服务架构中[API](../A/api.md) 调用流的关键组件，为维护可扩展、安全和高效的系统所必需的常用功能提供集中点。

- **身份验证和授权**：验证身份并确保调用者有权访问服务。
  - **速率限制**：控制用户在给定时间范围内可以发出的请求数量以防止滥用。
  - **负载平衡**：跨多个后端服务分配传入的 API 流量，以确保可扩展性和可靠性。
  - **缓存**：存储经常访问的数据的副本，以缩短响应时间并减少后端负载。
  - **请求整形和协议转换**：根据需要修改请求并在不同的 Web 协议之间进行转换。

### API 测试

#### 什么是 API 测试以及为什么它很重要？

[API testing](../A/api-testing.md) 是 [software testing](../S/software-testing.md) 的一种类型，涉及验证和确认应用程序编程接口 ([APIs](../A/api.md)) 及其与其他软件组件的交互。对于确保 [APIs](../A/api.md) 按预期运行、有效处理负载以及正确响应边缘情况和意外输入至关重要。
  [API testing](../A/api-testing.md) 的重要性在于它关注软件架构的**业务逻辑层**。与[UI testing](../U/ui-testing.md)评估前端界面不同，[API testing](../A/api-testing.md)处理处理数据和事务的代码，这通常比UI更稳定。这种稳定性允许在软件开发生命周期中更早地进行测试开发和执行，从而带来**更快的反馈**和**更快的[iterations](../I/iteration.md)**。
  [API testing](../A/api-testing.md) 对于以下方面至关重要：

- **验证核心功能**
    软件的信息，通过 API 公开。

- 确保
    **数据一致性**
    ,
    **响应时间**
    , 和
    **错误处理**
    符合要求的标准。

- **检测安全漏洞**
    和
    **访问控制**
    问题。

- **评估绩效**
    在各种条件下，包括负载和压力测试。

- 促进
    **[integration testing](../I/integration-testing.md)**
    通过检查不同软件组件之间的交互。
  鉴于微服务和分布式架构的兴起，[API testing](../A/api-testing.md) 变得更加重要，因为系统越来越依赖于多个协调工作的[APIs](../A/api.md)。自动化 [API](../A/api.md) 测试是一种最佳实践，可以实现持续测试和集成，这是敏捷和 DevOps 方法的基石。

- **验证核心功能**
    软件的信息，通过 API 公开。

- 确保
    **数据一致性**
    ,
    **响应时间**
    , 和
    **错误处理**
    符合要求的标准。

- **检测安全漏洞**
    和
    **访问控制**
    问题。

- **评估绩效**
    在各种条件下，包括负载和压力测试。

- 促进
    **[integration testing](../I/integration-testing.md)**
    通过检查不同软件组件之间的交互。

#### API 测试有哪些不同类型？

不同类型的[API testing](../A/api-testing.md) 侧重于[API](../A/api.md) 的功能、可靠性、性能和安全性的各个方面。以下是主要类型：

- **[Functional Testing](../F/functional-testing.md)** ：验证 API 的行为是否符合预期，涵盖各个功能和端到端场景。
  - **[Load Testing](../L/load-testing.md)** ：评估高流量下的性能，确保 API 可以处理预期负载。
  - **[Stress Testing](../S/stress-testing.md)** ：通过超出正常运行能力来确定 API 的断点。
  - **[Security Testing](../S/security-testing.md)** ：识别漏洞，确保数据加密且安全，并且身份验证和授权机制稳健。
  - **[Integration Testing](../I/integration-testing.md)** ：检查 API 与其他服务和数据库的交互以实现无缝集成。
  - **[Compatibility Testing](../C/compatibility-testing.md)** ：确保 API 在不同的设备、操作系统和网络环境中工作。
  - **[Reliability Testing](../R/reliability-testing.md)** ：验证 API 是否可以一致连接并带来稳定的性能。
  - **[Interoperability Testing](../I/interoperability-testing.md)** ：确认 API 遵循与其他 API 交互的标准和协议。
  - **[Regression Testing](../R/regression-testing.md)** ：在 API 更改后执行，确保新代码不会对现有功能产生不利影响。
  - **[Performance Testing](../P/performance-testing.md)** ：测量 API 在各种条件下的响应能力和稳定性。
  - **[API](../A/api.md) 监控**：持续检查生产中的 API 的正常运行时间、响应时间和正确行为。
  每种类型的测试对于确保 [API](../A/api.md) 可靠、安全、性能良好以及与其他系统组件顺利集成都至关重要。

- **[Functional Testing](../F/functional-testing.md)** ：验证 API 的行为符合预期，涵盖各个功能和端到端场景。
  - **[Load Testing](../L/load-testing.md)** ：评估高流量下的性能，确保 API 可以处理预期负载。
  - **[Stress Testing](../S/stress-testing.md)** ：通过超出正常运行能力来确定 API 的断点。
  - **[Security Testing](../S/security-testing.md)** ：识别漏洞，确保数据加密且安全，并且身份验证和授权机制稳健。
  - **[Integration Testing](../I/integration-testing.md)** ：检查 API 与其他服务和数据库的交互以实现无缝集成。
  - **[Compatibility Testing](../C/compatibility-testing.md)** ：确保 API 在不同的设备、操作系统和网络环境中工作。
  - **[Reliability Testing](../R/reliability-testing.md)** ：验证 API 是否可以一致连接并带来稳定的性能。
  - **[Interoperability Testing](../I/interoperability-testing.md)** ：确认 API 遵循与其他 API 交互的标准和协议。
  - **[Regression Testing](../R/regression-testing.md)** ：在 API 更改后执行，确保新代码不会对现有功能产生不利影响。
  - **[Performance Testing](../P/performance-testing.md)** ：测量 API 在各种条件下的响应能力和稳定性。
  - **[API](../A/api.md) 监控**：持续检查生产中的 API 的正常运行时间、响应时间和正确行为。

#### API测试常用哪些工具？

[API testing](../A/api-testing.md) 的常用工具包括：

- **[Postman](../P/postman.md)** ：用于 API 开发和测试的流行工具，提供用户友好的界面以及用于发送请求、分析响应和自动化测试的各种功能。
  - **SoapUI** ：专门为 SOAP 和 REST API 测试而设计的开源工具，提供全面的测试功能，包括功能、回归和负载测试。
  - **[JMeter](../J/jmeter.md)** ：JMeter 主要是一个性能测试工具，也可用于 API 测试，特别是压力和负载测试。
  - **Rest-Assured**：一种 Java DSL，用于简化 RESTful API 的测试，与现有的基于 Java 的测试框架无缝集成。
  - **Insomnia**：功能强大的 REST 客户端，具有 API 探索和调试功能以及基本的自动化测试功能。
  - **Katalon Studio**：一种一体化自动化解决方案，支持 API 和 UI 测试，为创建自动化测试提供用户友好的界面。
  - **Paw**：Mac 独有的 API 工具，用于测试和描述 API，具有功能齐全的开发环境。
  - **Karate DSL**：一种开源工具，它将 API 测试自动化、模拟、性能测试甚至 UI 自动化组合到一个统一的框架中。
  - **[Cypress](../C/cypress.md)** ：虽然 Cypress 主要以 Web 应用程序的端到端测试而闻名，但它也可以通过在测试中直接发送 HTTP 请求来用于 API 测试。
  这些工具提供各种功能，例如[test automation](../T/test-automation.md)、请求链接、环境变量以及与 CI/CD 管道的集成，以简化和增强[API testing](../A/api-testing.md) 流程。

- **[Postman](../P/postman.md)** ：用于 API 开发和测试的流行工具，提供用户友好的界面以及用于发送请求、分析响应和自动化测试的各种功能。
  - **SoapUI** ：专门为 SOAP 和 REST API 测试而设计的开源工具，提供全面的测试功能，包括功能、回归和负载测试。
  - **[JMeter](../J/jmeter.md)** ：JMeter 主要是一个性能测试工具，也可用于 API 测试，特别是压力和负载测试。
  - **Rest-Assured**：一种 Java DSL，用于简化 RESTful API 的测试，与现有的基于 Java 的测试框架无缝集成。
  - **Insomnia**：功能强大的 REST 客户端，具有 API 探索和调试功能以及基本的自动化测试功能。
  - **Katalon Studio**：一种一体化自动化解决方案，支持 API 和 UI 测试，为创建自动化测试提供用户友好的界面。
  - **Paw**：Mac 独有的 API 工具，用于测试和描述 API，具有功能齐全的开发环境。
  - **Karate DSL**：一种开源工具，它将 API 测试自动化、模拟、性能测试甚至 UI 自动化组合到一个统一的框架中。
  - **[Cypress](../C/cypress.md)** ：虽然 Cypress 主要以 Web 应用程序的端到端测试而闻名，但它也可以通过在测试中直接发送 HTTP 请求来用于 API 测试。

#### API 测试的关键步骤是什么？

[API testing](../A/api-testing.md) 涉及几个关键步骤，以确保应用程序编程接口的功能、可靠性、安全性和性能。以下是基本步骤：

1. **了解[API](../A/api.md)要求**：掌握[API](../A/api.md)的预期功能、输入、输出和错误代码。
  2. **设置测试环境**：为[API](../A/api.md) 测试配置必要的参数[databases](../D/database.md) 和服务器。
  3. **编写[test cases](../T/test-case.md)**：创建涵盖[API](../A/api.md)所有方面的[test cases](../T/test-case.md)，包括正测试、负测试、边界测试和安全测试。
  4. **选择正确的工具**：为 [API testing](../A/api-testing.md) 选择符合您的要求并与 CI/CD 管道集成的适当工具。
  5. **执行[test cases](../T/test-case.md)**：运行测试以根据定义的要求验证[API](../A/api.md)。这包括测试：
    - 功能性
    - 可靠性
    - 性能
    - 安全
    - 功能性
    - 可靠性
    - 性能
    - 安全
  6. **检查[API](../A/api.md) 响应**：确保[API](../A/api.md) 返回正确的状态代码、响应时间和数据结构。
  7. **验证数据完整性**：验证[API](../A/api.md) 在创建、读取、更新或删除资源时是否保持数据一致性和完整性。
  8. **使用自动化脚本**：实施自动化[test scripts](../T/test-script.md)以使测试过程高效且可重复。
  9. **监控性能**：评估[API](../A/api.md) 在各种负载条件下的响应时间和吞吐量。
  10. **分析和报告**：评估测试结果、记录结果并报告任何缺陷或性能问题。
  11. **审查和重构**：持续审查[test cases](../T/test-case.md) 和脚本以进行改进和[maintainability](../M/maintainability.md)。
  通过执行这些步骤，您可以确保全面覆盖[API testing](../A/api-testing.md)，从而实现稳健可靠的[API](../A/api.md) 集成。

1. **了解[API](../A/api.md)要求**：掌握[API](../A/api.md)的预期功能、输入、输出和错误代码。
  2. **设置测试环境**：为[API](../A/api.md) 测试配置必要的参数[databases](../D/database.md) 和服务器。
  3. **编写[test cases](../T/test-case.md)**：创建[test cases](../T/test-case.md)，涵盖[API](../A/api.md)的所有方面，包括正测试、负测试、边界测试和安全测试。
  4. **选择正确的工具**：为 [API testing](../A/api-testing.md) 选择符合您的要求并与 CI/CD 管道集成的适当工具。
  5. **执行[test cases](../T/test-case.md)**：运行测试以根据定义的要求验证[API](../A/api.md)。这包括测试：
    - 功能性
    - 可靠性
    - 性能
    - 安全
    - 功能性
    - 可靠性
    - 性能
    - 安全
  6. **检查[API](../A/api.md) 响应**：确保[API](../A/api.md) 返回正确的状态代码、响应时间和数据结构。
  7. **验证数据完整性**：验证[API](../A/api.md) 在创建、读取、更新或删除资源时是否保持数据一致性和完整性。
  8. **使用自动化脚本**：实施自动化[test scripts](../T/test-script.md)以使测试过程高效且可重复。
  9. **监控性能**：评估 [API](../A/api.md) 在各种负载条件下的响应时间和吞吐量。
  10. **分析和报告**：评估测试结果、记录结果并报告任何缺陷或性能问题。
  11. **审查和重构**：持续审查[test cases](../T/test-case.md) 和脚本以进行改进和[maintainability](../M/maintainability.md)。

#### 如何自动化 API 测试？

要自动化 [API testing](../A/api-testing.md)，请按照下列步骤操作：

1. **定义[test cases](../T/test-case.md)**：确定各种[API](../A/api.md)请求的预期结果，包括成功和错误场景。
  2. **选择测试工具**：选择支持 [API](../A/api.md) 自动化的工具，如 [Postman](../P/postman.md)、RestAssured 或 SoapUI。
  3. **设置环境**：使用必要的标头、身份验证令牌和其他先决条件配置测试环境。
  4. **编写[test scripts](../T/test-script.md)**：开发发出[API](../A/api.md) 调用并验证响应的脚本。根据工具使用 JavaScript、Python 或 Java 等编程语言。

    ```
    // Example using JavaScript with a testing framework like Mocha
    describe('GET /users', () => {
      it('should return a list of users', async () => {
        const response = await request(app).get('/users');
        expect(response.status).to.equal(200);
        expect(response.body).to.be.an('array');
      });
    });
    ```

5. **参数化测试**：使用变量作为输入，轻松测试不同的场景。
  6. **断言条件**：使用断言检查响应状态代码、响应时间和有效负载。
  7. **与 CI/CD 集成**：在 CI/CD 管道中自动执行测试以进行持续测试。
  8. **分析结果**：查看[test reports](../T/test-report.md) 以识别任何故障或性能问题。
  9. **维护测试**：定期更新测试以反映[API](../A/api.md) 中的更改。
  通过自动化 [API](../A/api.md) 测试，您可以确保对 [API](../A/api.md) 功能、可靠性和安全性进行一致且高效的验证。

1. **定义[test cases](../T/test-case.md)**：确定各种[API](../A/api.md)请求的预期结果，包括成功和错误场景。
  2. **选择测试工具**：选择[Postman](../P/postman.md)、RestAssured 或支持[API](../A/api.md) 自动化的SoapUI 等工具。
  3. **设置环境**：使用必要的标头、身份验证令牌和其他先决条件配置测试环境。
  4. **编写[test scripts](../T/test-script.md)**：开发发出[API](../A/api.md) 调用并验证响应的脚本。根据工具使用 JavaScript、Python 或 Java 等编程语言。

    ```
    // Example using JavaScript with a testing framework like Mocha
    describe('GET /users', () => {
      it('should return a list of users', async () => {
        const response = await request(app).get('/users');
        expect(response.status).to.equal(200);
        expect(response.body).to.be.an('array');
      });
    });
    ```

5. **参数化测试**：使用变量作为输入，轻松测试不同的场景。
  6. **断言条件**：使用断言检查响应状态代码、响应时间和有效负载。
  7. **与 CI/CD 集成**：在 CI/CD 管道中自动执行测试以进行持续测试。
  8. **分析结果**：查看[test reports](../T/test-report.md) 以识别任何故障或性能问题。
  9. **维护测试**：定期更新测试以反映[API](../A/api.md) 中的更改。

### API 安全

#### 与 API 相关的常见安全风险有哪些？

与 [APIs](../A/api.md) 相关的常见安全风险包括：

- **注入攻击**：恶意代码或命令被注入[API](../A/api.md)，利用漏洞获取未经授权的访问或数据。示例包括 [SQL](../S/sql.md) 注入、命令注入和跨站点脚本 (XSS)。
  - **损坏的身份验证**：身份验证机制中的缺陷可能允许攻击者冒充合法用户或完全绕过身份验证。
  - **敏感数据暴露**：保护机制不足可能导致个人信息、凭证或财务数据等敏感数据暴露。
  - **访问控制问题**：访问控制实施不当可能会导致对 [API](../A/api.md) 功能或数据进行未经授权的访问，称为损坏的访问控制。
  - **安全配置错误**：默认配置、不完整的 [setups](../S/setup.md) 或配置错误的 HTTP 标头可能会使 [APIs](../A/api.md) 遭受攻击。
  - **批量分配**：[APIs](../A/api.md) 在没有适当过滤的情况下接受 JSON 或 XML 输入可能允许攻击者修改他们不应访问的对象属性。
  - **日志记录和监控不足**：[API](../A/api.md) 活动日志记录不充分以及缺乏实时监控可能会妨碍对主动违规行为的检测和响应。
  - **不安全的反序列化**：未经验证而反序列化不受信任的数据可能会导致远程代码执行、重放攻击、注入攻击和权限升级。
  - **使用具有已知漏洞的组件**： [APIs](../A/api.md) 依赖于具有已知漏洞的库或软件很容易被利用。
  - **速率限制和节流缺失**：如果没有速率限制，[APIs](../A/api.md) 很容易受到暴力攻击和拒绝服务 (DoS) 攻击。
  减轻这些风险包括实施强大的身份验证和授权、对传输中和静态的数据进行加密、验证和清理输入、使用安全编码实践以及使所有组件保持最新状态。定期安全审核和[penetration testing](../P/penetration-testing.md) 对于维护[API](../A/api.md) 安全也至关重要。

- **注入攻击**：恶意代码或命令被注入[API](../A/api.md)，利用漏洞获取未经授权的访问或数据。示例包括 [SQL](../S/sql.md) 注入、命令注入和跨站点脚本 (XSS)。
  - **损坏的身份验证**：身份验证机制中的缺陷可能允许攻击者冒充合法用户或完全绕过身份验证。
  - **敏感数据暴露**：保护机制不足可能导致个人信息、凭证或财务数据等敏感数据暴露。
  - **访问控制问题**：访问控制实施不当可能会导致对 [API](../A/api.md) 功能或数据进行未经授权的访问，称为损坏的访问控制。
  - **安全配置错误**：默认配置、不完整的 [setups](../S/setup.md) 或配置错误的 HTTP 标头可能会使 [APIs](../A/api.md) 遭受攻击。
  - **批量分配**：[APIs](../A/api.md) 在没有适当过滤的情况下接受 JSON 或 XML 输入可能允许攻击者修改他们不应访问的对象属性。
  - **日志记录和监控不足**：[API](../A/api.md) 活动日志记录不充分以及缺乏实时监控可能会妨碍对主动违规行为的检测和响应。
  - **不安全的反序列化**：未经验证而反序列化不受信任的数据可能会导致远程代码执行、重放攻击、注入攻击和权限升级。
  - **使用具有已知漏洞的组件**： [APIs](../A/api.md) 依赖于具有已知漏洞的库或软件很容易被利用。
  - **速率限制和节流缺失**：如果没有速率限制，[APIs](../A/api.md) 很容易受到暴力攻击和拒绝服务 (DoS) 攻击。

#### 如何保护 API 的安全？

确保[API](../A/api.md) 的安全涉及实施措施以保护其免受未经授权的访问和威胁。以下是关键策略：

- **身份验证**：使用 API 密钥、令牌或 HTTP 基本身份验证等机制验证身份。考虑使用
    **OAuth**
    进行更细粒度的访问控制。

- **授权**：确保用户有权执行操作。实施基于角色的访问控制 (RBAC) 或基于属性的访问控制 (ABAC)。
  - **运输安全**：使用
    **HTTPS**
    与
    **SSL/TLS**
    对传输中的数据进行加密，防止拦截或篡改。

- **输入验证**：验证所有输入以防止注入攻击。使用严格的类型、格式和范围检查。
  - **输出编码**：输出时对数据进行编码以避免注入缺陷，特别是在 JSON 或 XML API 中。
  - **速率限制**：通过限制用户在给定时间范围内可以发出的请求数量来防止 DDoS 攻击。
  - **日志记录和监控**：保留详细日志并监控 API 使用情况，以快速检测和响应可疑活动。
  - **安全标头** ：使用 HTTP 标头，例如
    `Content-Security-Policy`
    ,
    `X-Content-Type-Options`
    , 和
    `X-Frame-Options`
    减轻常见攻击。

- **错误处理**：避免在错误消息中泄露堆栈跟踪或敏感信息。在服务器端使用通用错误消息和日志详细信息。
  - **补丁管理**：定期更新软件以修补API平台和依赖项中的已知漏洞。
  - **[Security Testing](../S/security-testing.md)** ：在您的自动化套件中包含安全测试。执行静态分析、动态分析和渗透测试。
  实施这些实践，为您的[API](../A/api.md) 创建强大的安全态势。

- **身份验证**：使用 API 密钥、令牌或 HTTP 基本身份验证等机制验证身份。考虑使用
    **OAuth**
    进行更细粒度的访问控制。

- **授权**：确保用户有权执行操作。实施基于角色的访问控制 (RBAC) 或基于属性的访问控制 (ABAC)。
  - **运输安全**：使用
    **HTTPS**
    与
    **SSL/TLS**
    对传输中的数据进行加密，防止拦截或篡改。

- **输入验证**：验证所有输入以防止注入攻击。使用严格的类型、格式和范围检查。
  - **输出编码**：输出时对数据进行编码以避免注入缺陷，特别是在 JSON 或 XML API 中。
  - **速率限制**：通过限制用户在给定时间范围内可以发出的请求数量来防止 DDoS 攻击。
  - **日志记录和监控**：保留详细日志并监控 API 使用情况，以快速检测和响应可疑活动。
  - **安全标头** ：使用 HTTP 标头，例如
    `Content-Security-Policy`
    ,
    `X-Content-Type-Options`
    , 和
    `X-Frame-Options`
    减轻常见攻击。

- **错误处理**：避免在错误消息中泄露堆栈跟踪或敏感信息。在服务器端使用通用错误消息和日志详细信息。
  - **补丁管理**：定期更新软件以修补API平台和依赖项中的已知漏洞。
  - **[Security Testing](../S/security-testing.md)** ：在您的自动化套件中包含安全测试。执行静态分析、动态分析和渗透测试。

#### 什么是 API 密钥身份验证？

[API](../A/api.md) 密钥身份验证是一种简单的安全方法，涉及发送**秘密令牌**作为访问[API](../A/api.md) 的请求的一部分。 [API](../A/api.md) 密钥是服务器用来**验证**请求者身份并**授权**访问[API](../A/api.md) 资源的唯一标识符。
  要实现 [API](../A/api.md) 密钥身份验证，客户端必须将 [API](../A/api.md) 密钥包含在请求标头中或作为查询参数。以下是使用 JavaScript 在请求标头中包含 [API](../A/api.md) 键的示例：

  ```
  fetch('https://api.example.com/data', {
    method: 'GET',
    headers: {
      'Authorization': 'ApiKey YOUR_API_KEY_HERE'
    }
  })
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));
  ```[API](../A/api.md) 密钥通常由[API](../A/api.md) 提供商在**注册**过程中提供，并且应保持**机密**以防止未经授权的访问。虽然 [API](../A/api.md) 密钥身份验证很容易实现，但它本身并不是最安全的方法，因为如果处理不当，密钥可能会被拦截或泄露。它通常与其他安全措施（例如 HTTPS）结合使用，以确保密钥安全传输。

#### 什么是 OAuth 以及它如何在 API 安全中使用？

OAuth 是访问委托的**开放标准**，通常用于授予网站或应用程序访问其他网站上的用户数据的权限，而无需向其提供密码。它充当中介，提供令牌而不是用户凭据来访问资源。
  在[API](../A/api.md) 安全性中，OAuth 允许客户端代表资源所有者访问服务器资源。它指定了资源所有者授权第三方访问其服务器资源而无需共享其凭据的流程。它专为与 **HTTP** 配合使用而设计，为要发行、验证的令牌以及定义访问权限的范围和持续时间提供了安全且标准化的方法。
  OAuth 2.0是使用最广泛的版本，定义了四种角色：

- **资源所有者**：授权应用程序访问其帐户的用户。
  - **资源服务器**：托管受保护资源的服务器。
  - **客户端**：请求访问资源服务器的应用程序。
  - **授权服务器** ：成功验证资源所有者并获得授权后向客户端颁发访问令牌的服务器。
  该流程通常涉及：

1. 应用程序向用户请求访问服务资源的授权。
  2. 如果用户授权该请求，应用程序将收到授权。
  3. 应用程序通过提供其自身身份的认证和授权许可，向授权服务器请求访问令牌。
  4. 如果应用程序身份得到确认并且授权有效，则授权服务器向应用程序颁发访问令牌。
  5. 应用程序向资源服务器请求资源并出示访问令牌进行身份验证。
  6. 如果访问令牌有效，则资源服务器向应用程序提供资源。
  OAuth 广泛用于[API](../A/api.md) 安全性，因为它能够为不同类型的访问提供具有有限权限的**细粒度授权**。

- **资源所有者**：授权应用程序访问其帐户的用户。
  - **资源服务器**：托管受保护资源的服务器。
  - **客户端**：请求访问资源服务器的应用程序。
  - **授权服务器** ：成功验证资源所有者并获得授权后向客户端颁发访问令牌的服务器。
  1. 应用程序向用户请求访问服务资源的授权。
  2. 如果用户授权该请求，应用程序将收到授权。
  3. 应用程序通过提供其自身身份的认证和授权许可，向授权服务器请求访问令牌。
  4. 如果应用程序身份得到确认并且授权有效，则授权服务器向应用程序颁发访问令牌。
  5. 应用程序向资源服务器请求资源并出示访问令牌进行身份验证。
  6. 如果访问令牌有效，则资源服务器向应用程序提供资源。

#### SSL/TLS 在 API 安全中的作用是什么？

SSL/TLS 通过在客户端和服务器之间建立加密链接，在**[API](../A/api.md) 安全性**中发挥着至关重要的作用。这确保了双方之间传输的所有数据保持**私密且完整**，从而防止其被窃听、篡改和消息伪造。
  当 [API](../A/api.md) 通过 HTTPS（HTTP 是基于 SSL/TLS 的分层）提供服务时，它会受益于底层安全功能：

- **加密**：数据在传输过程中进行加密，防止未经授权访问敏感信息。
  - **身份验证**：服务器使用 SSL/TLS 证书向客户端进行身份验证，确保客户端与合法服务器进行通信。
  - **完整性**：执行数据完整性检查以检测对传输数据的任何更改。
  对于[API testing](../A/api-testing.md)，验证 SSL/TLS 是否正确实施非常重要：

- **证书验证**：确保 API 服务器提供由受信任的证书颁发机构 (CA) 颁发的有效证书。
  - **协议版本**：确认 API 支持协议的安全版本（例如 TLS 1.2、TLS 1.3）并且不允许弃用的版本（例如 SSL 3.0、TLS 1.0）。
  - **密码套件**：检查 API 是否配置为使用提供强大加密的强密码套件。
  将 SSL/TLS 检查纳入自动化[API testing](../A/api-testing.md) 有助于维护安全态势并遵守最佳实践，使其成为[API testing](../A/api-testing.md) 流程中不可或缺的一部分。

- **加密**：数据在传输过程中进行加密，防止未经授权访问敏感信息。
  - **身份验证**：服务器使用 SSL/TLS 证书向客户端进行身份验证，确保客户端与合法服务器进行通信。
  - **完整性**：执行数据完整性检查以检测对传输数据的任何更改。
  - **证书验证**：确保 API 服务器提供由受信任的证书颁发机构 (CA) 颁发的有效证书。
  - **协议版本**：确认 API 支持协议的安全版本（例如 TLS 1.2、TLS 1.3）并且不允许弃用的版本（例如 SSL 3.0、TLS 1.0）。
  - **密码套件**：检查 API 是否配置为使用提供强大加密的强密码套件。

### API 文档

#### 为什么 API 文档很重要？

[API](../A/api.md) 文档至关重要，原因如下：

- **清晰度**：它提供了 API 提供的内容的清晰描述，包括端点、方法、参数和数据格式。
  - **可用性**：良好的文档使开发人员能够快速理解和集成 API，而不需要外部支持。
  - **效率**：它缩短了学习曲线，允许更快的开发和集成，这在敏捷环境中至关重要。
  - **测试**：文档可作为测试自动化工程师的参考，以根据其规范验证 API 的行为。
  - **维护**：它有助于随着时间的推移维护 API，从而更容易更新、重构或扩展其功能。
  - **入职**：新团队成员可以快速上手，确保连续性和生产力。
  - **社区**：对于开源或公共 API，它可以培育一个可以为 API 生态系统做出贡献的开发人员社区。
  具体而言，在 [test automation](../T/test-automation.md) 中，文档用于：

- **生成[Test Cases](../T/test-case.md)** ：自动化工具可以使用文档为不同场景生成测试用例。
  - **模拟服务**：它允许创建模拟 API 响应以进行测试的模拟服务。
  - **验证响应**：确保 API 的输出与记录的预期响应相匹配。
  总之，[API](../A/api.md) 文档是支持[API](../A/api.md) 整个生命周期（从设计和开发到测试和维护）的基础元素。

- **清晰度**：它提供了 API 提供的内容的清晰描述，包括端点、方法、参数和数据格式。
  - **可用性**：良好的文档使开发人员能够快速理解和集成 API，而不需要外部支持。
  - **效率**：它缩短了学习曲线，允许更快的开发和集成，这在敏捷环境中至关重要。
  - **测试**：文档可作为测试自动化工程师的参考，以根据其规范验证 API 的行为。
  - **维护**：它有助于随着时间的推移维护 API，从而更容易更新、重构或扩展其功能。
  - **入职**：新团队成员可以快速上手，确保连续性和生产力。
  - **社区**：对于开源或公共 API，它可以培育一个可以为 API 生态系统做出贡献的开发人员社区。
  - **生成[Test Cases](../T/test-case.md)** ：自动化工具可以使用文档为不同场景生成测试用例。
  - **模拟服务**：它允许创建模拟 API 响应以进行测试的模拟服务。
  - **验证响应**：确保 API 的输出与记录的预期响应相匹配。

#### 好的 API 文档中应该包含哪些内容？

好的[API](../A/api.md) 文档应包含以下元素：

- **概述**：API、其用途及其高级功能的简要描述。
  - **身份验证**：有关如何使用 API 进行身份验证的明确说明，包括任何所需的密钥或令牌。
  - **端点**：可用端点的完整列表，包括路径、HTTP 方法以及每个端点的简要描述。
  - **参数**：有关请求参数的详细信息，包括名称、数据类型、是否强制或可选，以及默认值（如果适用）。
  - **请求示例**：每个端点的示例请求，最好采用多种语言或工具（例如，
    `curl`
    ,
    `JavaScript`
    ,
    `Python`
    ）。

- $

    ```
    curl -X POST https://api.example.com/v1/resource \
    -H "Authorization: Bearer {token}" \
    -d '{ "param1": "value1", "param2": "value2" }'
    ```

- **响应示例**：每个端点的响应示例，包括状态代码、标头和正文内容。
  - **错误代码**：可能的错误代码、其含义以及潜在的解决方案或故障排除提示的列表。
  - **速率限制**：有关适用于 API 的任何速率限制的信息，包括它们的计算方式以及超出速率限制时会发生什么。
  - **更改日志**：对 API 所做的所有更改的日志，包括新功能、更新、弃用和删除。
  - **联系信息**：有关如何联系 API 提供商以获取支持或反馈的详细信息。
  请记住保持文档**最新**和**准确**，以确保为用户提供无缝集成和测试体验。

- **概述**：API、其用途及其高级功能的简要描述。
  - **身份验证**：有关如何使用 API 进行身份验证的明确说明，包括任何所需的密钥或令牌。
  - **端点**：可用端点的完整列表，包括路径、HTTP 方法以及每个端点的简要描述。
  - **参数**：有关请求参数的详细信息，包括名称、数据类型、是否强制或可选，以及默认值（如果适用）。
  - **请求示例**：每个端点的示例请求，最好采用多种语言或工具（例如，
    `curl`
    ,
    `JavaScript`
    ,
    `Python`
    ）。

- $

    ```
    curl -X POST https://api.example.com/v1/resource \
    -H "Authorization: Bearer {token}" \
    -d '{ "param1": "value1", "param2": "value2" }'
    ```

- **响应示例**：每个端点的响应示例，包括状态代码、标头和正文内容。
  - **错误代码**：可能的错误代码、其含义以及潜在的解决方案或故障排除提示的列表。
  - **速率限制**：有关适用于 API 的任何速率限制的信息，包括它们的计算方式以及超出速率限制时会发生什么。
  - **更改日志**：对 API 所做的所有更改的日志，包括新功能、更新、弃用和删除。
  - **联系信息**：有关如何联系 API 提供商以获取支持或反馈的详细信息。

#### 有哪些工具可用于创建 API 文档？

可以使用各种旨在促进该过程的工具来简化 [API](../A/api.md) 文档的创建过程。以下是一些广泛使用的选项：

- **[Swagger](../S/swagger.md)/OpenAPI**：提供规范和一套工具来生成、可视化[API](../A/api.md) 文档并与之交互。 [Swagger](../S/swagger.md) UI 提供了一个基于 Web 的界面，供用户探索 [API](../A/api.md)，[Swagger](../S/swagger.md) 编辑器允许编辑 OpenAPI 规范。

    ```
    paths:
      /users:
        get:
          summary: "List all users"
    ```

- **[Postman](../P/postman.md)**：主要是[API testing](../A/api-testing.md) 的平台，[Postman](../P/postman.md) 还包括用于记录[APIs](../A/api.md) 的功能。它可以生成和托管交互式文档，并允许从文档页面直接[API](../A/api.md) 调用。
  - **Apiary**：使用 [API](../A/api.md) Blueprint，一种基于 Markdown 的文档格式。 Apiary 提供了一个模拟服务器和其他工具来设计和原型 [APIs](../A/api.md) 以及文档。
  - **阅读文档**：与版本控制系统集成，以在每次提交时自动更新文档。它支持 Sphinx，这是一个可以轻松创建智能且美观的文档的工具。
  - **Docusaurus**：一个用于轻松构建、部署和维护开源项目网站的项目。它支持 Markdown，并且与 JSDoc for JavaScript 代码库等文档生成器结合使用时可以记录 [APIs](../A/api.md)。
  - **MkDocs**：面向项目文档的静态站点生成器。通过使用插件，它也可以成为 [API](../A/api.md) 文档的不错选择。
  每个工具都提供独特的功能和集成，因此选择取决于特定的项目要求、首选工作流程以及所使用的技术堆栈。

- **[Swagger](../S/swagger.md)/OpenAPI**：提供规范和一套工具来生成、可视化[API](../A/api.md) 文档并与之交互。 [Swagger](../S/swagger.md) UI 提供了一个基于 Web 的界面，供用户探索 [API](../A/api.md)，[Swagger](../S/swagger.md) 编辑器允许编辑 OpenAPI 规范。

    ```
    paths:
      /users:
        get:
          summary: "List all users"
    ```

- **[Postman](../P/postman.md)**：主要是[API testing](../A/api-testing.md) 的平台，[Postman](../P/postman.md) 还包括用于记录[APIs](../A/api.md) 的功能。它可以生成和托管交互式文档，并允许从文档页面直接[API](../A/api.md) 调用。
  - **Apiary**：使用 [API](../A/api.md) Blueprint，一种基于 Markdown 的文档格式。 Apiary 提供了一个模拟服务器和其他工具来设计和原型 [APIs](../A/api.md) 以及文档。
  - **阅读文档**：与版本控制系统集成，以在每次提交时自动更新文档。它支持 Sphinx，这是一个可以轻松创建智能且美观的文档的工具。
  - **Docusaurus**：一个用于轻松构建、部署和维护开源项目网站的项目。它支持 Markdown，并且与 JSDoc for JavaScript 代码库等文档生成器结合使用时可以记录 [APIs](../A/api.md)。
  - **MkDocs**：面向项目文档的静态站点生成器。通过使用插件，它也可以成为 [API](../A/api.md) 文档的不错选择。

#### API 文档应该多久更新一次？

**一旦对 [API](../A/api.md) 进行更改**，[API](../A/api.md) 文档就应该更新。这可确保文档准确反映 [API](../A/api.md) 的当前状态，这对于依赖它进行集成和测试目的的开发人员至关重要。更新应包括新端点、对现有端点的更改、弃用以及对请求或响应结构的任何修改。
  对于持续交付环境，请考虑将文档流程集成到 CI/CD 管道中。这可以通过使用直接从代码或 [API](../A/api.md) 规范生成文档的工具来实现，例如 OpenAPI/[Swagger](../S/swagger.md)。这样，每次代码发布时都会自动生成和发布文档，确保其保持最新状态。
  除了自动更新之外，还应**定期**进行**手动审查**，以确保清晰度、准确性和完整性。这可以是敏捷团队冲刺审查的一部分，也可以定期安排，例如每季度一次。
  请记住，过时或不正确的文档可能会导致开发和测试中浪费时间，并可能导致团队之间的沟通不畅。因此，保持 [API](../A/api.md) 文档最新不仅是良好实践的问题，而且是保持软件开发和 [test automation](../T/test-automation.md) 流程的效率和可靠性的必要条件。

#### API 文档在 API 测试中的作用是什么？

[API](../A/api.md) 文档在[API testing](../A/api-testing.md) 中至关重要，因为它充当理解[API](../A/api.md) 的功能、预期行为和集成方法的**路线图**。它提供**端点**、**方法**、**参数**和**请求/响应模式**，测试人员使用它们来创建有意义的[test cases](../T/test-case.md)。良好的文档包括请求和响应的**示例**，从而更容易根据其合同验证[API](../A/api.md)。
  测试人员依靠文档来确保[API](../A/api.md) 遵守其**规范**。如果没有准确的文档，测试人员无法有效地执行**合同测试**来验证[API](../A/api.md) 是否满足服务之间交互的商定标准。
  此外，文档通常概述**错误代码**和**消息**，这对于**[negative testing](../N/negative-testing.md)**至关重要。了解 [API](../A/api.md) 在各种故障场景下的行为对于确保消费应用程序中的稳健错误处理和优雅降级至关重要。
  在[automated testing](../A/automated-testing.md)中，文档可用于生成**存根**和**模拟**，模拟[API](../A/api.md)响应以进行隔离测试。支持 **OpenAPI** 或其他 [API](../A/api.md) 规范格式的工具可以自动创建这些测试工件，从而简化测试开发过程。
  最后，最新的文档对于维护和扩展[test suites](../T/test-suite.md) 至关重要，尤其是当[APIs](../A/api.md) 不断发展时。它允许测试人员快速识别更改并相应地调整他们的测试，确保 [API](../A/api.md) 在更新后继续按预期运行。
