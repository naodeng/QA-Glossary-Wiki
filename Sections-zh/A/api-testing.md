# API 测试

<!-- TOC START -->
- [相关术语：](#相关术语：)
- [有关 API 测试的问题吗？](#有关-api-测试的问题吗？)
  - [基础知识和重要性](#基础知识和重要性)
    - [什么是 API 测试？](#什么是-api-测试？)
    - [为什么 API 测试很重要？](#为什么-api-测试很重要？)
    - [API 测试有哪些好处？](#api-测试有哪些好处？)
    - [API 测试和单元测试有什么区别？](#api-测试和单元测试有什么区别？)
    - [API 测试在集成测试中的作用是什么？](#api-测试在集成测试中的作用是什么？)
  - [API 测试类型](#api-测试类型)
    - [API 测试有哪些不同类型？](#api-测试有哪些不同类型？)
    - [REST 和 SOAP API 在测试方面有什么区别？](#rest-和-soap-api-在测试方面有什么区别？)
    - [API 测试中的 CRUD 测试是什么？](#api-测试中的-crud-测试是什么？)
    - [API 测试中的负载测试是什么？](#api-测试中的负载测试是什么？)
    - [API 测试中的安全测试是什么？](#api-测试中的安全测试是什么？)
  - [API 测试工具](#api-测试工具)
    - [API 测试常用哪些工具？](#api-测试常用哪些工具？)
    - [Postman 用于 API 测试有哪些功能？](#postman-用于-api-测试有哪些功能？)
    - [SoapUI 与其他 API 测试工具有何不同？](#soapui-与其他-api-测试工具有何不同？)
    - [使用自动化工具进行 API 测试有哪些优势？](#使用自动化工具进行-api-测试有哪些优势？)
    - [选择API测试工具时应该考虑哪些因素？](#选择api测试工具时应该考虑哪些因素？)
  - [API测试流程](#api测试流程)
    - [API 测试涉及哪些步骤？](#api-测试涉及哪些步骤？)
    - [什么是 API 端点测试？](#什么是-api-端点测试？)
    - [如何验证 API 测试中的响应？](#如何验证-api-测试中的响应？)
    - [API 测试中如何处理身份验证和授权？](#api-测试中如何处理身份验证和授权？)
    - [测试期间需要查找哪些常见 API 错误？](#测试期间需要查找哪些常见-api-错误？)
  - [高级概念](#高级概念)
    - [API 测试在持续集成/持续部署 (CI/CD) 中的作用是什么？](#api-测试在持续集成持续部署-cicd-中的作用是什么？)
    - [API 测试如何集成到敏捷方法中？](#api-测试如何集成到敏捷方法中？)
    - [API 测试在微服务架构中的作用是什么？](#api-测试在微服务架构中的作用是什么？)
    - [API 测试中的契约测试是什么？](#api-测试中的契约测试是什么？)
    - [API 测试如何帮助性能优化？](#api-测试如何帮助性能优化？)
<!-- TOC END -->

API测试

涉及验证和确认

应用程序编程接口

的性能、功能、可靠性和安全性。该过程包括向

应用程序编程接口

并分析其应对措施以确保其达到预期结果。此测试可以手动或使用自动化工具完成，有助于识别无效输入、不良错误处理和未经授权的访问等问题。

## 相关术语：

- [API](../A/api.md)
- [Microservices Testing](../M/microservices-testing.md)
- [Postman](../P/postman.md)
- [Swagger](../S/swagger.md)

## 有关 API 测试的问题吗？

### 基础知识和重要性

#### 什么是 API 测试？

[API Testing](../A/api-testing.md) 是 [software testing](../S/software-testing.md) 的一种类型，涉及验证和确认应用程序编程接口 ([APIs](../A/api.md)) 及其与其他软件组件的交互。该测试重点关注软件架构的业务逻辑层，确保[APIs](../A/api.md)按预期运行、数据准确交换、服务在各种条件下可靠且高性能。
  测试是在没有用户界面的消息层进行的，使用工具将调用发送到[API](../A/api.md)、获取输出并记录系统的响应。输入可以采用 REST、SOAP 或其他 Web 服务调用的形式，输出通常采用 HTTP 状态代码、JSON、XML 或其他数据格式的形式。
  [API](../A/api.md) 测试是自动化的以提高效率，并且可以包括：

- **[Functional testing](../F/functional-testing.md)** ：确保 API 的行为符合预期。
  - **[Reliability testing](../R/reliability-testing.md)** ：检查 API 的连接能力并产生一致的结果。
  - **[Performance testing](../P/performance-testing.md)** ：评估 API 的响应时间和吞吐量。
  - **[Security testing](../S/security-testing.md)** ：识别 API 中的漏洞。
  [API Testing](../A/api-testing.md) 对于验证依赖于多个互连[API](../A/api.md) 服务的应用程序的核心功能至关重要。它可以及早发现问题并有助于保持高水平的服务质量。 [Test cases](../T/test-case.md) 是根据[API](../A/api.md) 的规范设计的，断言用于根据预期结果验证响应。

- **[Functional testing](../F/functional-testing.md)** ：确保 API 的行为符合预期。
  - **[Reliability testing](../R/reliability-testing.md)** ：检查 API 的连接能力并产生一致的结果。
  - **[Performance testing](../P/performance-testing.md)** ：评估 API 的响应时间和吞吐量。
  - **[Security testing](../S/security-testing.md)** ：识别 API 中的漏洞。

#### 为什么 API 测试很重要？

[API Testing](../A/api-testing.md) 至关重要，因为它直接检查软件架构的**业务逻辑**层，提供缺陷和**安全漏洞**的**早期检测**。它允许测试各种软件组件和**外部系统**之间的**交互**，而无需用户界面。这导致**更快的[test execution](../T/test-execution.md)**和**更好的[test coverage](../T/test-coverage.md)**，因为[APIs](../A/api.md)可以单独测试。
  此外，[API Testing](../A/api-testing.md)对于**现代开发实践**至关重要，例如**DevOps**和**微服务**，这些实践中的服务经常更新和部署。它确保这些服务在集成到应用程序之前**有效通信**并**按预期运行**，从而降低集成问题的风险。
  [API Testing](../A/api-testing.md) 还支持**自动化**，这对于**持续测试**和**持续交付**至关重要。自动化 [API](../A/api.md) 测试可以快速、频繁地运行，为开发团队提供**即时反馈**。这对于 **[regression testing](../R/regression-testing.md)** 尤其重要，确保新的更改不会破坏现有功能。
  此外，[API Testing](../A/api-testing.md)对于**性能优化**是不可或缺的，因为它有助于识别服务级别的瓶颈和性能问题。它还在**合同测试**中发挥着重要作用，确保[API](../A/api.md) 遵守其定义的期望以及与其他服务或客户的协议。
  总之，[API Testing](../A/api-testing.md) 是强大的[software testing](../S/software-testing.md) 策略的**基础元素**，确保软件交互最关键级别的系统可靠性、性能和安全性。

#### API 测试有哪些好处？

[API Testing](../A/api-testing.md) 提供了多种提高软件系统质量和可靠性的好处：

- **早期问题检测**：通过直接测试逻辑层，可以在开发周期的早期发现问题，从而节省时间和资源。
  - **语言无关**：无论用于构建应用程序的语言如何，都可以测试 API，从而实现更灵活的测试环境。
  - **无 GUI 测试**：它无需用户界面即可测试核心功能，这在 UI 尚未开发或正在发生更改时非常有用。
  - **改进[Test Coverage](../T/test-coverage.md)** ：可以达到更多的条件和情况，包括那些难以通过UI测试刺激的条件和情况。
  - **更快[Test Execution](../T/test-execution.md)** ：API 测试通常比 UI 驱动的测试更快，从而带来更快的反馈和更高效的开发周期。
  - **稳定性**：与 UI 测试相比，它们不太容易发生变化，从而产生更稳定的测试套件，需要更少的维护。
  - **[Integration Testing](../I/integration-testing.md)** ：API 测试可以作为集成测试的基础，确保应用程序的不同部分正确交互。
  - **安全**：它允许测试人员评估应用程序的安全方面，例如访问控制、身份验证和数据加密。
  - **性能基准测试**：它可用于评估负载下应用程序的性能和行为，帮助识别瓶颈并优化吞吐量和响应时间。
  - **自动化**：API 测试可以轻松实现自动化，集成到 CI/CD 管道中，并在不同的环境中执行，提供有关系统运行状况的持续反馈。
  - **早期问题检测**：通过直接测试逻辑层，可以在开发周期的早期发现问题，从而节省时间和资源。
  - **语言无关**：无论用于构建应用程序的语言如何，都可以测试 API，从而实现更灵活的测试环境。
  - **无 GUI 测试**：它无需用户界面即可测试核心功能，这在 UI 尚未开发或正在发生更改时非常有用。
  - **改进[Test Coverage](../T/test-coverage.md)** ：可以达到更多的条件和案例，包括那些难以通过UI测试刺激的条件和案例。
  - **更快[Test Execution](../T/test-execution.md)** ：API 测试通常比 UI 驱动的测试更快，从而带来更快的反馈和更高效的开发周期。
  - **稳定性**：与 UI 测试相比，它们不太容易发生变化，从而产生更稳定的测试套件，需要更少的维护。
  - **[Integration Testing](../I/integration-testing.md)** ：API 测试可以作为集成测试的基础，确保应用程序的不同部分正确交互。
  - **安全**：它允许测试人员评估应用程序的安全方面，例如访问控制、身份验证和数据加密。
  - **性能基准测试**：它可用于评估负载下应用程序的性能和行为，帮助识别瓶颈并优化吞吐量和响应时间。
  - **自动化**：API 测试可以轻松实现自动化，集成到 CI/CD 管道中，并在不同的环境中执行，提供有关系统运行状况的持续反馈。

#### API 测试和单元测试有什么区别？

[API Testing](../A/api-testing.md) 和[Unit Testing](../U/unit-testing.md) 是具有不同范围和目标的不同测试方法。
  **[Unit Testing](../U/unit-testing.md)** 专注于软件的最小部分，通常是类中的单个函数或方法。它由开发人员执行，以确保软件的每个单元按设计运行。单元测试与依赖项隔离，通常使用模拟或存根来模拟其他模块。

  ```
  function add(a, b) {
    return a + b;
  }
  // Unit test example
  test('adds 1 + 2 to equal 3', () => {
    expect(add(1, 2)).toBe(3);
  });
  ```另一方面，**[API Testing](../A/api-testing.md)** 涉及测试应用程序编程接口 ([APIs](../A/api.md)) 以验证它们是否满足功能、可靠性、性能和安全期望。它在[unit testing](../U/unit-testing.md)之上的一层运行，通常不关心系统的内部工作，而是专注于软件架构的业务逻辑层。
  [API](../A/api.md) 测试通过 HTTP 请求和响应与应用程序交互，验证集成各种软件模块的逻辑。与单元测试不同，[API](../A/api.md) 测试可能不那么精细，并且通常需要运行环境来与[API](../A/api.md) 交互。

  ```
  // API test example
  test('GET /users returns a list of users', async () => {
    const response = await request(app).get('/users');
    expect(response.statusCode).toBe(200);
    expect(response.body).toBeInstanceOf(Array);
  });
  ```虽然 **[Unit Testing](../U/unit-testing.md)** 确保各个组件独立工作，但 **[API Testing](../A/api-testing.md)** 验证系统的外部接口是否正常运行，可能会发现单元测试由于与其他系统组件集成而可能遗漏的问题。

#### API 测试在集成测试中的作用是什么？

[API Testing](../A/api-testing.md) 通过确保通过[APIs](../A/api.md) 交互的不同软件模块按预期进行通信和协同工作，在[Integration Testing](../I/integration-testing.md) 中发挥着关键作用。在[Integration Testing](../I/integration-testing.md) 中，[API Testing](../A/api-testing.md) 重点验证[APIs](../A/api.md) 与系统其他组件集成时的端到端功能、可靠性、性能和安全性。
  在[Integration Testing](../I/integration-testing.md)期间，测试人员使用[API](../A/api.md)调用来验证各个软件层和外部系统之间的交互。这包括检查互连模块之间发生的数据流、错误处理和业务逻辑。此阶段的[API Testing](../A/api-testing.md) 有助于识别[Unit Testing](../U/unit-testing.md) 期间可能不会出现的问题，例如数据交换格式的差异、身份验证问题以及处理并发进程的失败。
  通过[Integration Testing](../I/integration-testing.md)中的自动化[API](../A/api.md)测试，工程师可以快速检测集成缺陷并确保系统作为一个整体无缝运行。这在经常集成和测试代码更改的持续集成环境中尤其重要。
  总之，在 [Integration Testing](../I/integration-testing.md) 中，[API Testing](../A/api-testing.md) 对于以下功能至关重要：

- **验证交互**
    不同系统组件之间。

- **确保数据一致性**
    和适当的数据交换。

- **检测接口缺陷**
    ，这在单元测试期间可能不会被捕获。

- **验证业务逻辑**
    跨越多个模块。

- **自动化[test cases](../T/test-case.md)**
    促进 CI/CD 管道中的持续测试。

- **验证交互**
    不同系统组件之间。

- **确保数据一致性**
    和适当的数据交换。

- **检测接口缺陷**
    ，这在单元测试期间可能不会被捕获。

- **验证业务逻辑**
    跨越多个模块。

- **自动化[test cases](../T/test-case.md)**
    促进 CI/CD 管道中的持续测试。

### API 测试类型

#### API 测试有哪些不同类型？

不同类型的[API testing](../A/api-testing.md) 侧重于[API](../A/api.md) 的功能、可靠性、性能和安全性的各个方面。以下是一些关键类型：

- **[Functional Testing](../F/functional-testing.md)**：验证[API](../A/api.md) 是否按预期运行，处理请求并返回正确的响应。
  - **[Validation Testing](../V/validation-testing.md)**：确保[API](../A/api.md) 满足规范和要求，包括数据验证和架构一致性。
  - **错误检测**：识别错误情况并检查[API](../A/api.md) 如何处理不正确的输入或意外的用户行为。
  - **[UI Testing](../U/ui-testing.md)**：对于带有用户界面组件的[APIs](../A/api.md)，这从用户的角度测试集成和功能。
  - **[Security Testing](../S/security-testing.md)**：评估[API](../A/api.md) 是否存在漏洞，确保数据得到正确加密、身份验证和授权。
  - **[Performance Testing](../P/performance-testing.md)**：测量[API](../A/api.md) 在各种负载条件下的响应能力、吞吐量和稳定性。
  - **[Fuzz Testing](../F/fuzz-testing.md)**：将随机、格式错误或意外的数据发送到[API](../A/api.md) 以检查崩溃、故障或安全漏洞。
  - **互操作性和 WS 合规性测试**：对于 SOAP [APIs](../A/api.md)，这可确保 [API](../A/api.md) 遵守 WS-* 标准并且可以与其他 WS 兼容系统进行互操作。
  - **运行时/错误检测**：在执行期间监视[API](../A/api.md)，以检测正常操作期间发生的运行时问题和错误。
  - **[Penetration Testing](../P/penetration-testing.md)**：模拟攻击以识别[API](../A/api.md) 内的安全漏洞。
  - **合规性测试**：验证[API](../A/api.md) 是否符合监管标准和合规性要求。
  每种类型针对[API](../A/api.md) 的不同方面和层，确保全面的测试策略涵盖[API](../A/api.md) 的功能和潜在问题的全部范围。

- **[Functional Testing](../F/functional-testing.md)**：验证[API](../A/api.md) 是否按预期运行，处理请求并返回正确的响应。
  - **[Validation Testing](../V/validation-testing.md)**：确保[API](../A/api.md) 满足规范和要求，包括数据验证和架构一致性。
  - **错误检测**：识别错误情况并检查[API](../A/api.md) 如何处理不正确的输入或意外的用户行为。
  - **[UI Testing](../U/ui-testing.md)**：对于带有用户界面组件的[APIs](../A/api.md)，这从用户的角度测试集成和功能。
  - **[Security Testing](../S/security-testing.md)**：评估[API](../A/api.md) 是否存在漏洞，确保数据得到正确加密、身份验证和授权。
  - **[Performance Testing](../P/performance-testing.md)**：测量[API](../A/api.md) 在各种负载条件下的响应能力、吞吐量和稳定性。
  - **[Fuzz Testing](../F/fuzz-testing.md)**：将随机、格式错误或意外的数据发送到[API](../A/api.md) 以检查崩溃、故障或安全漏洞。
  - **互操作性和 WS 合规性测试**：对于 SOAP [APIs](../A/api.md)，这可确保 [API](../A/api.md) 遵守 WS-* 标准并且可以与其他 WS 兼容系统进行互操作。
  - **运行时/错误检测**：在执行期间监视[API](../A/api.md)，以检测正常操作期间发生的运行时问题和错误。
  - **[Penetration Testing](../P/penetration-testing.md)**：模拟攻击以识别[API](../A/api.md) 内的安全漏洞。
  - **合规性测试**：验证[API](../A/api.md) 是否满足监管标准和合规性要求。

#### REST 和 SOAP API 在测试方面有什么区别？

测试 **REST**（表述性状态传输）和 **SOAP**（简单对象访问协议）[APIs](../A/api.md) 时，主要区别在于使用的 **协议**、**数据格式**、**复杂性** 和 **测试方法**。
  **休息[APIs](../A/api.md)**：

- 使用
    **HTTP**
    显式方法（GET、POST、PUT、DELETE）。

- 支持多种数据格式，常见
    **JSON**
    和
    **XML**
    。

- 无国籍；从客户端到服务器的每个请求都必须包含理解该请求所需的所有信息。
  - 测试涉及使用正确的参数和方法构建请求，并验证响应代码、标头和正文。像Postman这样的工具可以用来模拟API调用和自动化测试。
  **肥皂[APIs](../A/api.md)**：

- 操作与
    **SOAP协议**
    ，一组更严格的消息传递模式。

- 主要使用
    **XML**
    对于消息格式。

- 可以是有状态的；服务器可以在多个请求上维护会话的状态。
  - 测试需要分析
    **WSDL**
    （Web 服务描述语言）文件来了解可用的操作。必须针对特定的 SOAP 信封结构和所包含的数据进行断言。 SoapUI 等工具专门用于此目的。
  在测试方面，由于使用标准 HTTP 和 JSON，REST [API testing](../A/api-testing.md) 通常被认为更**灵活**且**更易于实现**，而 SOAP 则需要对协议和服务的 WSDL 具有更多**详细知识**。此外，REST 测试可以更加**轻量级**，因为它不需要像 SOAP 那样进行大量的 XML 解析和验证。然而，SOAP 的严格规范可能有利于测试，因为它强制执行必须遵守的契约，从而可能减少 [test cases](../T/test-case.md) 中的歧义。

- 使用
    **HTTP**
    显式方法（GET、POST、PUT、DELETE）。

- 支持多种数据格式，常见
    **JSON**
    和
    **XML**
    。

- 无国籍；从客户端到服务器的每个请求都必须包含理解该请求所需的所有信息。
  - 测试涉及使用正确的参数和方法构建请求，并验证响应代码、标头和正文。像Postman这样的工具可以用来模拟API调用和自动化测试。
  - 操作与
    **SOAP协议**
    ，一组更严格的消息传递模式。

- 主要使用
    **XML**
    对于消息格式。

- 可以是有状态的；服务器可以在多个请求上维护会话的状态。
  - 测试需要分析
    **WSDL**
    （Web 服务描述语言）文件来了解可用的操作。必须针对特定的 SOAP 信封结构和所包含的数据进行断言。 SoapUI 等工具专门用于此目的。

#### API 测试中的 CRUD 测试是什么？

[API testing](../A/api-testing.md) 中的 CRUD 测试侧重于验证**创建**、**读取**、**更新**和**删除**操作，这些操作是 RESTful [APIs](../A/api.md) 功能的基础。每个操作对应一个HTTP方法：POST用于创建，GET用于读取，PUT/PATCH用于更新，DELETE用于删除。
  在 CRUD 测试期间，您确保：

- **发布**
    请求成功创建新资源并返回适当的状态代码（例如，
    `201 Created`
    )，以及资源表示或位置。

- **获取**
    请求准确地检索数据，支持查询和路径参数，并优雅地处理不存在的资源（例如，
    `404 Not Found`
    ）。

- **放置**
    或
    **补丁**
    请求正确修改现有资源，在适用的情况下尊重幂等性，并提供正确的响应代码（例如，
    `200 OK`
    或
    `204 No Content`
    ）。

- **删除**
    请求按预期删除资源并返回正确的状态代码（例如，
    `200 OK`
    或
    `204 No Content`
    ）。
  CRUD 测试确保[API](../A/api.md) 遵守其规范并正确处理数据操作场景。这对于维护应用程序内的数据完整性和一致性至关重要。 [Test cases](../T/test-case.md) 应涵盖典型的[use cases](../U/use-case.md) 和边缘情况，例如尝试删除不存在的资源或使用无效数据更新资源。

- **发布**
    请求成功创建新资源并返回适当的状态代码（例如，
    `201 Created`
    )，以及资源表示或位置。

- **获取**
    请求准确地检索数据，支持查询和路径参数，并优雅地处理不存在的资源（例如，
    `404 Not Found`
    ）。

- **放置**
    或
    **补丁**
    请求正确修改现有资源，在适用的情况下尊重幂等性，并提供正确的响应代码（例如，
    `200 OK`
    或
    `204 No Content`
    ）。

- **删除**
    请求按预期删除资源并返回正确的状态代码（例如，
    `200 OK`
    或
    `204 No Content`
    ）。

#### API 测试中的负载测试是什么？

[API testing](../A/api-testing.md) 中的[Load testing](../L/load-testing.md) 涉及模拟对[API](../A/api.md) 端点的大量请求，以评估系统在压力下的性能。此类测试对于确定 [API](../A/api.md) 的 **可扩展性** 和 **可靠性** 至关重要，因为它有助于在 [API](../A/api.md) 承受大流量时识别瓶颈和潜在故障点。
  在[load testing](../L/load-testing.md)期间，测量**响应时间**、**吞吐量**、**错误率**和**资源利用率**等各种指标来评估[API](../A/api.md)的性能。目标是确保[API](../A/api.md) 能够处理预期的负载条件，同时保持可接受的性能水平。
  **[JMeter](../J/jmeter.md)**、**Gadling** 和 **LoadRunner** 等工具通常用于自动生成请求和收集性能数据的过程。这些工具允许测试人员通过调整并发用户数量、请求频率和有效负载大小来创建真实的负载场景。
  [Load testing](../L/load-testing.md) 通常在受控环境中进行，尽可能接近地反映生产[setup](../S/setup.md)。这确保了测试结果的相关性和可操作性。在测试过程中逐渐增加负载以了解性能如何随所施加的负载而变化非常重要。
  通过尽早识别性能限制，组织可以在影响最终用户之前对其 [APIs](../A/api.md) 进行必要的优化，从而确保即使在高峰时段也能提供流畅高效的用户体验。

#### API 测试中的安全测试是什么？

[API testing](../A/api-testing.md) 中的[Security Testing](../S/security-testing.md) 重点验证[APIs](../A/api.md) 的机密性、完整性和可用性。它的目的是发现可能导致未经授权的访问、数据泄露或其他安全威胁的漏洞。关键方面包括：

- **身份验证**：确保只有授权用户才能访问 API。
  - **授权**：确认用户有权执行请求的操作。
  - **输入验证**：检查 SQL 注入、XSS 和其他注入缺陷。
  - **加密**：验证数据在传输过程中和静态时是否已加密。
  - **错误处理**：确保敏感信息不会通过错误消息泄露。
  - **速率限制**：通过限制 API 请求速率来防止 DoS 攻击。
  [Security testing](../S/security-testing.md) OWASP ZAP 或 Burp Suite 等工具可以自动进行漏洞扫描。将 [security testing](../S/security-testing.md) 集成到 CI/CD 管道中对于持续的安全保证至关重要。

- **身份验证**：确保只有授权用户才能访问 API。
  - **授权**：确认用户有权执行请求的操作。
  - **输入验证**：检查 SQL 注入、XSS 和其他注入缺陷。
  - **加密**：验证数据在传输过程中和静态时是否已加密。
  - **错误处理**：确保敏感信息不会通过错误消息泄露。
  - **速率限制**：通过限制 API 请求速率来防止 DoS 攻击。

### API 测试工具

#### API 测试常用哪些工具？

[API testing](../A/api-testing.md) 的常用工具包括：

- **[Postman](../P/postman.md)** ：手动和自动测试的流行选择，提供用户友好的界面和脚本功能。
  - **SoapUI**：专门为 SOAP 和 REST API 测试设计的工具，提供广泛的测试功能。
  - **Katalon Studio**：支持 API 和 UI 测试自动化的集成工具。
  - **[JMeter](../J/jmeter.md)** ：主要用于性能测试的开源工具，也能够进行 API 测试。
  - **Rest-Assured**：一种 Java DSL，用于简化 RESTful API 的测试，与现有的基于 Java 的生态系统无缝集成。
  - **Insomnia**：一个强大的 REST 客户端，具有测试 API 的功能，包括 GraphQL 和 gRPC。
  - **Curl** ：用于通过 URL 传输数据的命令行工具，通常用于快速 API 交互。
  - **Paw**：Mac 独有的 API 工具，具有本机 macOS 界面，为 API 开发和测试提供高级功能。
  - **Karate DSL**：一种开源工具，它将 API 测试自动化、模拟、性能测试甚至 UI 自动化结合到一个统一的框架中。
  - **Assertible**：专注于持续测试和可靠性的工具，提供自动化 API 测试和监控。
  - **HTTPie** ：一个用户友好的命令行 HTTP 客户端，提供简单直观的 HTTP 请求方式，可用于 API 测试。
  这些工具提供各种功能，包括测试脚本、响应验证以及与 CI/CD 管道的集成，以满足不同的测试需求和偏好。

- **[Postman](../P/postman.md)** ：手动和自动测试的流行选择，提供用户友好的界面和脚本功能。
  - **SoapUI**：专门为 SOAP 和 REST API 测试设计的工具，提供广泛的测试功能。
  - **Katalon Studio**：支持 API 和 UI 测试自动化的集成工具。
  - **[JMeter](../J/jmeter.md)** ：主要用于性能测试的开源工具，也能够进行 API 测试。
  - **Rest-Assured**：一种 Java DSL，用于简化 RESTful API 的测试，与现有的基于 Java 的生态系统无缝集成。
  - **Insomnia**：一个强大的 REST 客户端，具有测试 API 的功能，包括 GraphQL 和 gRPC。
  - **Curl** ：用于通过 URL 传输数据的命令行工具，通常用于快速 API 交互。
  - **Paw**：Mac 独有的 API 工具，具有本机 macOS 界面，为 API 开发和测试提供高级功能。
  - **Karate DSL**：一种开源工具，它将 API 测试自动化、模拟、性能测试甚至 UI 自动化结合到一个统一的框架中。
  - **Assertible**：专注于持续测试和可靠性的工具，提供自动化 API 测试和监控。
  - **HTTPie** ：一个用户友好的命令行 HTTP 客户端，提供简单直观的 HTTP 请求方式，可用于 API 测试。

#### Postman 用于 API 测试有哪些功能？

[Postman](../P/postman.md) 是[API testing](../A/api-testing.md) 的多功能工具，具有简化[API](../A/api.md) 测试的创建、执行和管理的功能：

- **易于使用的界面**：Postman 提供了一个用户友好的 GUI，用于发送请求、保存环境和查看响应。
  - **集合**：将相关的 API 请求分组到集合中，以便更好地组织和执行。
  - **环境和全局变量**：存储和管理变量以轻松在不同的测试环境之间切换。
  - **预请求脚本和测试**：编写 JavaScript 代码，在发送请求之前或收到响应之后执行，以设置条件或断言结果。
  - **[Automated Testing](../A/automated-testing.md)** ：使用 Collection Runner 或 Newman（Postman 的命令行伴侣）运行集合，以实现自动测试执行。
  - **数据驱动测试**：将外部文件中的数据馈送到请求中，以验证不同条件下的 API 行为。
  - **监控**：安排集合以特定时间间隔运行，以监控 API 性能和运行状况。
  - **文档**：从集合中自动生成和发布 API 文档。
  - **版本控制**：与 Postman 的云服务同步集合以进行协作和版本控制。
  - **集成**：使用 Newman 或 Postman API 与 CI/CD 管道连接，以无缝集成到开发工作流程中。
  - **[API](../A/api.md) Mocking** ：创建模拟服务器来模拟 API 端点进行测试，而不需要实际的后端服务。
  - **工作空间**：在共享或个人工作空间中与团队成员协作。
  这些功能使[Postman](../P/postman.md)成为[API testing](../A/api-testing.md)的综合工具，促进手动[exploratory testing](../E/exploratory-testing.md)和自动[test execution](../T/test-execution.md)。

- **易于使用的界面**：Postman 提供了一个用户友好的 GUI，用于发送请求、保存环境和查看响应。
  - **集合**：将相关的 API 请求分组到集合中，以便更好地组织和执行。
  - **环境和全局变量**：存储和管理变量以轻松在不同的测试环境之间切换。
  - **预请求脚本和测试**：编写 JavaScript 代码，在发送请求之前或收到响应之后执行，以设置条件或断言结果。
  - **[Automated Testing](../A/automated-testing.md)** ：使用 Collection Runner 或 Newman（Postman 的命令行伴侣）运行集合，以实现自动测试执行。
  - **数据驱动测试**：将外部文件中的数据馈送到请求中，以验证不同条件下的 API 行为。
  - **监控**：安排集合以特定时间间隔运行，以监控 API 性能和运行状况。
  - **文档**：从集合中自动生成和发布 API 文档。
  - **版本控制**：与 Postman 的云服务同步集合以进行协作和版本控制。
  - **集成**：使用 Newman 或 Postman API 与 CI/CD 管道连接，以无缝集成到开发工作流程中。
  - **[API](../A/api.md) Mocking** ：创建模拟服务器来模拟 API 端点进行测试，而不需要实际的后端服务。
  - **工作空间**：在共享或个人工作空间中与团队成员协作。

#### SoapUI 与其他 API 测试工具有何不同？

SoapUI 从其他 [API testing](../A/api-testing.md) 工具中脱颖而出，主要是因为它专注于 **SOAP（简单对象访问协议）** 服务，尽管它也支持 RESTful 服务和其他 Web 协议。它为**特定于 SOAP 的验证**提供了专门的环境，例如 WS-Security、WS-Addressing 和 MTOM（消息传输优化机制），这些在可能更以 REST 为中心的其他工具中不太常见。
  另一个区别是 SoapUI 对**数据驱动测试**的广泛支持。它允许测试人员轻松地从 [databases](../D/database.md) 和 Excel 文件等外部源读取数据，这些数据可用于创建动态请求并验证响应。这与它通过 **使用 Groovy 编写脚本** 创建复杂场景的能力相结合。
  SoapUI 还提供了**模拟功能**，使用户能够在 Web 服务实际实现之前对其行为进行模拟。这在并行开发服务的**面向服务的架构（SOA）**中特别有用。
  对于[performance testing](../P/performance-testing.md)，SoapUI 提供了**LoadUI**，这是一个集成工具，允许测试人员重用功能性[test cases](../T/test-case.md) 作为性能测试，这是并非所有[API testing](../A/api-testing.md) 工具都提供的独特功能。
  最后，SoapUI Pro（SoapUI 的商业版本）提供了高级功能，例如**[SQL](../S/sql.md) 查询生成器**、**基于表单的输入**和**报告生成**，这些功能增强了用户体验和生产力，使其与许多开源替代方案区分开来。

#### 使用自动化工具进行 API 测试有哪些优势？

[API testing](../A/api-testing.md) 的自动化工具具有以下几个优点：

- **效率**：自动化测试的运行速度比手动测试快得多，可以在更短的时间内执行更多的测试。
  - **一致性**：自动化确保每次都以相同的方式执行测试，减少人为错误并提高可靠性。
  - **可重用性**：测试脚本可以在不同版本的 API 之间重用，从而节省为每次更改编写新测试的时间。
  - **集成**：自动化测试可以轻松集成到 CI/CD 管道中，从而实现持续测试和部署。
  - **可扩展性**：自动化支持在各种条件和负载下运行测试，这对于性能测试至关重要。
  - **覆盖率**：工具可以生成并执行大量测试用例，提高测试的广度和深度。
  - **[Regression Testing](../R/regression-testing.md)** ：可以快速且频繁地运行自动回归测试，以确保新的更改不会破坏现有功能。
  - **报告**：工具通常提供详细的日志和报告，使识别和解决问题变得更加容易。
  - **并行执行**：测试可以并行运行，减少测试执行所需的时间。
  - **编程控制**：测试用例可以包括难以手动执行的复杂逻辑和场景。
  通过利用这些优势，[test automation](../T/test-automation.md) 工程师可以确保[API](../A/api.md) 更加强大和可靠，同时优化他们的测试工作和资源。

- **效率**：自动化测试的运行速度比手动测试快得多，可以在更短的时间内执行更多的测试。
  - **一致性**：自动化确保每次都以相同的方式执行测试，减少人为错误并提高可靠性。
  - **可重用性**：测试脚本可以在不同版本的 API 之间重用，从而节省为每次更改编写新测试的时间。
  - **集成**：自动化测试可以轻松集成到 CI/CD 管道中，从而实现持续测试和部署。
  - **可扩展性**：自动化支持在各种条件和负载下运行测试，这对于性能测试至关重要。
  - **覆盖率**：工具可以生成并执行大量测试用例，提高测试的广度和深度。
  - **[Regression Testing](../R/regression-testing.md)** ：可以快速且频繁地运行自动回归测试，以确保新的更改不会破坏现有功能。
  - **报告**：工具通常提供详细的日志和报告，使识别和解决问题变得更加容易。
  - **并行执行**：测试可以并行运行，减少测试执行所需的时间。
  - **编程控制**：测试用例可以包括难以手动执行的复杂逻辑和场景。

#### 选择API测试工具时应该考虑哪些因素？

选择 [API testing](../A/api-testing.md) 工具时，请考虑以下因素：

- **兼容性**：确保该工具支持您的应用程序使用的 API 协议和数据格式，例如 REST、SOAP、GraphQL 或 gRPC。
  - **易于使用**：寻找一个用户友好的界面来简化测试的创建、执行和维护。
  - **自动化功能**：该工具应有助于在 CI/CD 管道中轻松实现自动化，并与版本控制系统集成。
  - **脚本语言**：选择支持您的团队熟悉的脚本语言的工具，例如 JavaScript、Python 或 Groovy。
  - **参数化和数据驱动测试**：使用外部数据源进行动态测试用例的能力对于彻底的测试至关重要。
  - **报告和分析**：详细的报告和分析有助于快速识别问题并跟踪测试覆盖率。
  - **社区和支持**：强大的社区和良好的支持对于故障排除和学习最佳实践非常宝贵。
  - **[Performance Testing](../P/performance-testing.md)** ：该工具应提供性能测试功能，例如负载和压力测试。
  - **[Security Testing](../S/security-testing.md)** ：寻找内置安全测试功能来验证身份验证、授权和加密。
  - **可扩展性**：使用插件或自定义代码扩展工具的能力对于复杂的测试场景非常重要。
  - **成本**：考虑工具的成本，包括初始购买、许可费用和长期维护费用。
  - **供应商稳定性**：选择来自信誉良好的供应商的工具，这些供应商具有一致的更新和支持记录。
  选择与您团队的技能相符、适合您的技术堆栈并满足您的测试要求的工具。

- **兼容性**：确保该工具支持您的应用程序使用的 API 协议和数据格式，例如 REST、SOAP、GraphQL 或 gRPC。
  - **易于使用**：寻找一个用户友好的界面来简化测试的创建、执行和维护。
  - **自动化功能**：该工具应有助于在 CI/CD 管道中轻松实现自动化，并与版本控制系统集成。
  - **脚本语言**：选择支持您的团队熟悉的脚本语言的工具，例如 JavaScript、Python 或 Groovy。
  - **参数化和数据驱动测试**：使用外部数据源进行动态测试用例的能力对于彻底的测试至关重要。
  - **报告和分析**：详细的报告和分析有助于快速识别问题并跟踪测试覆盖率。
  - **社区和支持**：强大的社区和良好的支持对于故障排除和学习最佳实践非常宝贵。
  - **[Performance Testing](../P/performance-testing.md)** ：该工具应提供性能测试功能，例如负载和压力测试。
  - **[Security Testing](../S/security-testing.md)** ：寻找内置安全测试功能来验证身份验证、授权和加密。
  - **可扩展性**：使用插件或自定义代码扩展工具的能力对于复杂的测试场景非常重要。
  - **成本**：考虑工具的成本，包括初始购买、许可费用和长期维护费用。
  - **供应商稳定性**：选择来自信誉良好的供应商的工具，这些供应商具有一致的更新和支持记录。

### API测试流程

#### API 测试涉及哪些步骤？

[API testing](../A/api-testing.md) 涉及的步骤通常包括：

1. **定义[API testing](../A/api-testing.md)的范围**：识别需要测试的端点和操作（GET、POST、PUT、DELETE）。
  2. **了解[API](../A/api.md) 要求**：查看[API](../A/api.md) 文档以了解预期的请求格式、标头、有效负载和响应代码。
  3. **设置测试环境**：配置必要的参数，例如基本 URL、身份验证凭据和任何所需的初始数据[setup](../S/setup.md)。
  4. **创建[test cases](../T/test-case.md)**：开发涵盖功能、可靠性、性能和安全性等各个方面的[test cases](../T/test-case.md)。包括积极、消极和极端情况场景。
  5. **自动化[test cases](../T/test-case.md)**：使用[API testing](../A/api-testing.md)工具编写脚本来发送请求并验证响应。使用断言来检查正确的状态代码、响应时间和数据准确性。
  6. **执行测试**：针对[API](../A/api.md) 运行自动[test cases](../T/test-case.md)。这可以手动完成，也可以作为 CI/CD 管道的一部分完成。
  7. **验证并记录结果**：分析测试结果是否存在任何差异。记录任何失败测试的缺陷并记录结果。
  8. **审查[test coverage](../T/test-coverage.md)**：确保[API](../A/api.md) 的所有方面都经过测试，并根据需要更新[test cases](../T/test-case.md) 以提高覆盖范围。
  9. **监视和维护**：持续监视[API](../A/api.md) 是否存在任何性能问题，并维护[test cases](../T/test-case.md) 以适应[API](../A/api.md) 中的任何更改。
  10. **报告**：生成[test reports](../T/test-report.md)，总结测试活动，包括通过/失败的测试数量以及任何未发现的问题。
  每个步骤对于确保对 [API](../A/api.md) 的功能、可靠性、性能和安全性进行彻底评估都至关重要。

1. **定义[API testing](../A/api-testing.md)的范围**：识别需要测试的端点和操作（GET、POST、PUT、DELETE）。
  2. **了解[API](../A/api.md) 要求**：查看[API](../A/api.md) 文档以了解预期的请求格式、标头、有效负载和响应代码。
  3. **设置测试环境**：配置必要的参数，例如基本 URL、身份验证凭据和任何所需的初始数据[setup](../S/setup.md)。
  4. **创建[test cases](../T/test-case.md)**：开发涵盖功能、可靠性、性能和安全性等各个方面的[test cases](../T/test-case.md)。包括积极、消极和极端情况场景。
  5. **自动化[test cases](../T/test-case.md)**：使用[API testing](../A/api-testing.md)工具编写脚本来发送请求并验证响应。使用断言来检查正确的状态代码、响应时间和数据准确性。
  6. **执行测试**：针对[API](../A/api.md) 运行自动[test cases](../T/test-case.md)。这可以手动完成，也可以作为 CI/CD 管道的一部分完成。
  7. **验证并记录结果**：分析测试结果是否存在任何差异。记录任何失败测试的缺陷并记录结果。
  8. **审查[test coverage](../T/test-coverage.md)**：确保[API](../A/api.md) 的所有方面都经过测试，并根据需要更新[test cases](../T/test-case.md) 以提高覆盖范围。
  9. **监视和维护**：持续监视[API](../A/api.md) 是否存在任何性能问题，并维护[test cases](../T/test-case.md) 以适应[API](../A/api.md) 中的任何更改。
  10. **报告**：生成[test reports](../T/test-report.md)，总结测试活动，包括通过/失败的测试数量以及任何未发现的问题。

#### 什么是 API 端点测试？

[API](../A/api.md) 端点测试是验证客户端和[API](../A/api.md) 之间各个交互点的过程。它确保**端点**使用适当的输入参数正确响应各种 HTTP 方法，例如 GET、POST、PUT 和 DELETE。此类测试侧重于：

- **请求和响应结构**：验证请求的格式是否正确以及响应是否与预期的架构匹配。
  - **数据验证**：确保发送到端点和从端点接收的数据正确并遵守约束。
  - **HTTP 状态代码** ：检查端点是否返回各种场景的正确状态代码。
  - **错误处理**：确认端点提供有意义的错误消息并妥善处理错误。
  - **性能**：评估端点在负载下的响应时间和行为。
  端点测试可以使用 [Postman](../P/postman.md) 等工具实现自动化，也可以使用 Python 中的 `requests` 或 JavaScript 中的 `axios` 等库以编程方式使用脚本。以下是使用 `axios` 在 JavaScript 中进行简单 GET 请求测试的示例：

  ```
  const axios = require('axios');
  axios.get('https://api.example.com/v1/users')
    .then(response => {
      if(response.status === 200) {
        console.log('Success: Endpoint returned 200 OK');
      } else {
        console.error('Error: Unexpected status code');
      }
    })
    .catch(error => {
      console.error('Error: Endpoint request failed');
    });
  ```在这种情况下，端点测试是[API testing](../A/api-testing.md)的一个重要方面，重点关注[API](../A/api.md)外部接口的正确性和可靠性。

- **请求和响应结构**：验证请求的格式是否正确以及响应是否与预期的架构匹配。
  - **数据验证**：确保发送到端点和从端点接收的数据正确并遵守约束。
  - **HTTP 状态代码** ：检查端点是否返回各种场景的正确状态代码。
  - **错误处理**：确认端点提供有意义的错误消息并妥善处理错误。
  - **性能**：评估端点在负载下的响应时间和行为。

#### 如何验证 API 测试中的响应？

验证[API testing](../A/api-testing.md) 中的响应涉及多项检查，以确保[API](../A/api.md) 的行为符合预期。使用**断言**将实际响应与预期结果进行比较。关键验证点包括：

- **状态代码**：验证 HTTP 状态代码（例如，200 OK、404 Not Found）以确认响应成功或失败。
  - **响应时间**：确保 API 在可接受的时间范围内响应，表明性能健康状况。
  - **标头**：检查响应标头是否正确的内容类型、缓存策略和安全参数。
  - **正文**：验证响应有效负载的数据结构、数据类型和值是否正确。如果适用，请使用 JSON 或 XML 架构验证。
  - **错误代码**：对于错误响应，请确保 API 返回适当的错误代码和消息。
  - **业务逻辑**：确认响应符合业务规则和工作流程。
  - **数据完整性**：如果API与数据库交互，请验证返回的数据与数据库状态是否一致。
  使用 Chai 断言库的 JavaScript 断言示例：

  ```
  const expect = require('chai').expect;
  const request = require('supertest');
  const api = request('http://api.example.com');
  api.get('/users/1')
    .end((err, response) => {
      expect(response.statusCode).to.equal(200);
      expect(response.body).to.have.property('username');
      expect(response.body.username).to.be.a('string');
      expect(response.headers['content-type']).to.equal('application/json');
    });
  ```使用您选择的 [API testing](../A/api-testing.md) 工具自动执行这些验证，以确保测试过程的一致性和效率。

- **状态代码**：验证 HTTP 状态代码（例如，200 OK、404 Not Found）以确认响应成功或失败。
  - **响应时间**：确保 API 在可接受的时间范围内响应，表明性能健康状况。
  - **标头**：检查响应标头是否正确的内容类型、缓存策略和安全参数。
  - **正文**：验证响应有效负载的数据结构、数据类型和值是否正确。如果适用，请使用 JSON 或 XML 架构验证。
  - **错误代码**：对于错误响应，请确保 API 返回适当的错误代码和消息。
  - **业务逻辑**：确认响应符合业务规则和工作流程。
  - **数据完整性**：如果API与数据库交互，请验证返回的数据与数据库状态是否一致。

#### API 测试中如何处理身份验证和授权？

在[API testing](../A/api-testing.md) 中处理身份验证和授权涉及验证[API](../A/api.md) 是否正确识别用户（身份验证）并授予适当的访问级别（授权）。处理方法如下：

1. **了解身份验证机制**：常见方法包括Basic Auth、OAuth、[API](../A/api.md)密钥和JWT（JSON Web Tokens）。确定[API](../A/api.md) 使用哪种方法。
  2. **检索有效凭据**：对于[automated testing](../A/automated-testing.md)，您将需要一组有效凭据或令牌。这可能涉及初步 [API](../A/api.md) 调用来生成令牌或使用预先生成的长期令牌进行测试。
  3. **在 [API](../A/api.md) 请求中包含凭据**：根据身份验证方法，这可能意味着向 HTTP 请求添加标头、cookie 或参数。例如，使用基本身份验证，您可以添加带有 Base64 编码的用户名和密码的 `Authorization` 标头。

    ```
    Authorization: Basic <base64-encoded-credentials>
    ```

4. **使用无效/过期的凭据进行测试**：确保 [API](../A/api.md) 在提供无效凭据或令牌已过期时正确拒绝访问。
  5. **验证授权**：通过尝试使用不同的用户角色访问资源来测试[API](../A/api.md) 是否强制执行正确的权限级别。确认每个角色只能访问其应有的权限。
  6. **自动化凭证管理**：在您的 [test automation](../T/test-automation.md) 框架中，实现一种自动处理令牌生成和续订的方法，特别是在令牌过期时间很短的情况下。
  7. **安全存储凭据**：使用环境变量或安全保管库在 [test automation](../T/test-automation.md) 环境中存储和访问凭据，避免硬编码敏感信息。
  8. **检查响应代码和消息**：确保[API](../A/api.md) 返回适合身份验证和授权方案的 HTTP 状态代码和消息，例如 `401 Unauthorized` 或 `403 Forbidden`。
  1. **了解身份验证机制**：常见方法包括Basic Auth、OAuth、[API](../A/api.md)密钥和JWT（JSON Web Tokens）。确定[API](../A/api.md) 使用哪种方法。
  2. **检索有效凭据**：对于[automated testing](../A/automated-testing.md)，您将需要一组有效凭据或令牌。这可能涉及初步 [API](../A/api.md) 调用来生成令牌或使用预先生成的长期令牌进行测试。
  3. **在 [API](../A/api.md) 请求中包含凭据**：根据身份验证方法，这可能意味着向 HTTP 请求添加标头、cookie 或参数。例如，使用基本身份验证，您可以添加带有 Base64 编码的用户名和密码的 `Authorization` 标头。

    ```
    Authorization: Basic <base64-encoded-credentials>
    ```

4. **使用无效/过期的凭据进行测试**：确保 [API](../A/api.md) 在提供无效凭据或令牌已过期时正确拒绝访问。
  5. **验证授权**：通过尝试使用不同的用户角色访问资源来测试[API](../A/api.md) 是否强制执行正确的权限级别。确认每个角色只能访问其应有的权限。
  6. **自动化凭证管理**：在您的 [test automation](../T/test-automation.md) 框架中，实现一种自动处理令牌生成和续订的方法，特别是在令牌过期时间很短的情况下。
  7. **安全存储凭据**：使用环境变量或安全保管库在 [test automation](../T/test-automation.md) 环境中存储和访问凭据，避免硬编码敏感信息。
  8. **检查响应代码和消息**：确保[API](../A/api.md) 返回适合身份验证和授权方案的 HTTP 状态代码和消息，例如 `401 Unauthorized` 或 `403 Forbidden`。

#### 测试期间需要查找哪些常见 API 错误？

测试 [APIs](../A/api.md) 时，请注意以下常见错误：

- **400 Bad Request**：请求格式无效；确保有效负载符合 API 规范。
  - **401 Unauthorized**：身份验证凭据丢失或不正确；验证令牌或用户凭据。
  - **403 Forbidden**：已通过身份验证但缺乏权限；检查用户权限。
  - **404 Not Found**：端点或资源不存在；确认 URL 和资源标识符。
  - **405 Method Not allowed** ：HTTP 方法不适合端点；查看 API 文档以了解允许的方法。
  - **408 Request Timeout** ：服务器等待请求超时；调查网络问题或增加超时设置。
  - **429 Too Many Requests**：超出速率限制阈值；实施退避策略并遵守速率限制。
  - **500 内部服务器错误**：一般服务器端错误；检查服务器日志是否有未处理的异常或错误配置。
  - **502 Bad Gateway** ：来自上游服务器的无效响应；确保所有后端服务正常运行。
  - **503 服务不可用**：服务已关闭或过载；监控系统健康状况和负载。
  - **504 Gateway Timeout** ：上游服务器未能及时响应；与 408 类似，但表示服务器到服务器通信出现问题。
  根据架构验证响应负载，检查数据一致性，并确保错误消息清晰且有帮助。使用自动化工具模拟各种场景和边缘情况。在评估错误响应时，始终考虑[API](../A/api.md) 的上下文和业务逻辑。

- **400 Bad Request**：请求格式无效；确保有效负载符合 API 规范。
  - **401 Unauthorized**：身份验证凭据丢失或不正确；验证令牌或用户凭据。
  - **403 Forbidden**：已通过身份验证但缺乏权限；检查用户权限。
  - **404 Not Found**：端点或资源不存在；确认 URL 和资源标识符。
  - **405 Method Not allowed** ：HTTP 方法不适合端点；查看 API 文档以了解允许的方法。
  - **408 Request Timeout** ：服务器等待请求超时；调查网络问题或增加超时设置。
  - **429 Too Many Requests**：超出速率限制阈值；实施退避策略并遵守速率限制。
  - **500 内部服务器错误**：一般服务器端错误；检查服务器日志是否有未处理的异常或错误配置。
  - **502 Bad Gateway** ：来自上游服务器的无效响应；确保所有后端服务正常运行。
  - **503 服务不可用**：服务已关闭或过载；监控系统健康状况和负载。
  - **504 Gateway Timeout** ：上游服务器未能及时响应；与 408 类似，但表示服务器到服务器通信出现问题。

### 高级概念

#### API 测试在持续集成/持续部署 (CI/CD) 中的作用是什么？

[API Testing](../A/api-testing.md) 通过确保应用程序编程接口 ([APIs](../A/api.md)) 满足功能、可靠性、性能和安全标准，在持续集成/持续部署 (CI/CD) 管道中发挥着关键作用。在 CI/CD 中，每次代码提交都会触发自动构建和 [test process](../T/test-process.md)，其中包括用于验证不同软件组件之间交互的 [API](../A/api.md) 测试。
  **在 CI/CD 中，[API Testing](../A/api-testing.md):**

- **验证**
    新的代码更改并未破坏现有的 API 功能。

- **启用**
    及早发现缺陷，减少修复所需的成本和精力。

- **有利于**
    在完整系统环境中集成服务之前，单独测试 API。

- **支持**
    对于 DevOps 实践至关重要的快速反馈循环，使开发人员能够立即收到有关其变更影响的信息。

- **自动化**
    API 回归测试，确保增强功能或错误修复不会引入新问题。

- **助攻**
    监控每次部署的 API 性能，保持应用程序的响应能力和效率。

- **贡献**
    通过合并自动安全测试来检查 API 中的漏洞，以确保安全。
  通过将 [API Testing](../A/api-testing.md) 集成到 CI/CD 管道中，团队可以保持高质量标准，同时加速软件更新的交付，从而在生产中实现更可靠、更强大的应用程序。

- **验证**
    新的代码更改并未破坏现有的 API 功能。

- **启用**
    及早发现缺陷，减少修复所需的成本和精力。

- **有利于**
    在完整系统环境中集成服务之前，单独测试 API。

- **支持**
    对于 DevOps 实践至关重要的快速反馈循环，使开发人员能够立即收到有关其变更影响的信息。

- **自动化**
    API 回归测试，确保增强功能或错误修复不会引入新问题。

- **助攻**
    监控每次部署的 API 性能，保持应用程序的响应能力和效率。

- **贡献**
    通过合并自动安全测试来检查 API 中的漏洞，以确保安全。

#### API 测试如何集成到敏捷方法中？

将[API testing](../A/api-testing.md) 集成到**敏捷方法**中需要使测试活动与迭代开发周期保持一致。首先将[API testing](../A/api-testing.md) 合并到**用户故事**和**验收标准**中，确保从一开始就考虑[API](../A/api.md) 功能。在**冲刺计划**期间，为 [API](../A/api.md) [test case](../T/test-case.md) 创建和自动化分配任务，使它们与冲刺的开发工作保持一致。
  通过在实际 [API](../A/api.md) 代码之前编写 [API](../A/api.md) 测试来利用 **[test-driven development](../T/test-driven-development.md) (TDD)**，确保代码从一开始就满足测试要求。在**冲刺**中，将 [API testing](../A/api-testing.md) 作为 **完成定义**的一部分包含在内，以确保在考虑功能完成之前对 [APIs](../A/api.md) 进行全面测试。
  利用**持续集成 (CI)** 管道在代码提交时自动触发 [API](../A/api.md) 测试。这确保了对变更影响的即时反馈。在**每日站会**中，讨论 [API](../A/api.md) 测试的状态和结果，以使团队随时了解情况并及时解决问题。
  合并与敏捷项目管理工具良好集成的 **[test automation](../T/test-automation.md) 框架**，从而实现 [test cases](../T/test-case.md)、用户故事和缺陷之间的可追溯性。应用**模拟和服务虚拟化**来独立于其依赖项来测试[APIs](../A/api.md)，从而允许隔离测试并与开发并行。
  最后，在开发人员、测试人员和产品所有者之间培养**协作**的文化，鼓励对 [API](../A/api.md) 质量分担责任，并促进通过 [API testing](../A/api-testing.md) 发现的问题的快速解决。

#### API 测试在微服务架构中的作用是什么？

在**微服务架构**中，[API testing](../A/api-testing.md) 在确保每个服务能够与其他服务有效通信以及整个系统按预期运行方面发挥着关键作用。鉴于微服务被设计为松散耦合且可独立部署，[API testing](../A/api-testing.md) 对于验证**服务间契约**和交互至关重要。
  [API testing](../A/api-testing.md) 在这种情况下重点关注：

- **服务隔离**：隔离测试各个微服务，以确保它们正确执行其特定功能。
  - **集成点**：验证服务是否通过 API 彼此无缝交互，这涉及检查数据流、错误处理和回退机制。
  - **端到端工作流程**：确保微服务的组合运行满足整体业务需求。
  - **版本控制**：检查 API 版本控制是否得到正确处理，以避免在服务独立更新时发生重大更改。
  - **服务发现**：确认服务可以在不断发展的生态系统中动态发现并相互通信。
  通过在微服务架构中严格测试[APIs](../A/api.md)，团队可以及早发现问题，减少服务间依赖，并保持高水平的服务自治。这对于实现微服务承诺的可扩展性、灵活性和弹性至关重要。此外，[API testing](../A/api-testing.md) 通过自动验证服务集成来支持 **CI/CD 管道**，这对于快速可靠地交付基于微服务的应用程序至关重要。

- **服务隔离**：隔离测试各个微服务，以确保它们正确执行其特定功能。
  - **集成点**：验证服务是否通过 API 彼此无缝交互，这涉及检查数据流、错误处理和回退机制。
  - **端到端工作流程**：确保微服务的组合运行满足整体业务需求。
  - **版本控制**：检查 API 版本控制是否得到正确处理，以避免在服务独立更新时发生重大更改。
  - **服务发现**：确认服务可以在不断发展的生态系统中动态发现并相互通信。

#### API 测试中的契约测试是什么？

合同测试是 [API testing](../A/api-testing.md) 的一种类型，重点是验证不同服务之间的交互是否遵循“合同”中记录的共同理解。该合同定义了消费者（例如客户端应用程序）和提供者（例如 Web 服务）之间的预期请求和响应。
  在合同测试中，消费者和提供商测试是根据商定的合同开发的，该合同充当单一事实来源。消费者测试验证客户端是否可以正确生成满足合同规范的请求。提供者测试确保服务可以处理这些请求并返回符合合同的响应。
  一个流行的合约测试工具是 **Pact**，它允许开发人员将合约定义为代码，并提供一个在消费者和提供商之间共享这些合约的平台。合同被版本化以安全地管理变更。
  合同测试的主要目标是在将服务部署到生产之前检测服务之间的任何不兼容性。这在服务独立开发和部署的微服务架构中尤为重要。
  契约测试不会取代其他形式的[API testing](../A/api-testing.md)，而是通过关注交互契约来补充它们，这可能是[integration testing](../I/integration-testing.md) 中的盲点。它提供快速反馈和信心，确保应用程序的独立可部署单元将按预期协同工作。

#### API 测试如何帮助性能优化？

[API Testing](../A/api-testing.md) 允许工程师在服务层**识别性能瓶颈**，从而为性能优化做出重大贡献。通过对 [API](../A/api.md) 端点执行性能测试，团队可以测量各种负载条件下的响应时间、吞吐量和资源利用率。这些数据有助于查明效率低下和需要优化的领域。
  例如，使用[JMeter](../J/jmeter.md)或LoadRunner等工具，测试人员可以模拟高并发场景，以评估[API](../A/api.md)在压力下的表现。如果[API](../A/api.md)表现出**长响应时间**或**高错误率**，则表明需要进行性能调整。这可能涉及优化 [database](../D/database.md) 查询、缓存响应或扩展基础设施。
  此外，[API](../A/api.md) 性能测试可以自动化并包含在 CI/CD 管道中，确保在部署之前验证任何代码更改的性能影响。这种主动方法可以防止生产中的性能下降。
  通过隔离 [API](../A/api.md) 层，工程师可以专注于优化服务级别性能，而无需承担全面 UI 或端到端测试的开销。这在**微服务架构**中尤其重要，其中各个服务必须以最佳方式执行以确保整个系统的响应能力。
  总之，[API Testing](../A/api-testing.md) 是一个强大的性能优化工具，可提供对服务级别性能的深入了解，并使工程师能够做出数据驱动的决策，以提高其应用程序的速度和可靠性。
