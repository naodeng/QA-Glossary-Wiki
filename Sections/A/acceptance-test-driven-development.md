<!-- markdownlint-disable MD041 -->
- [ATDD 验收测试驱动开发](#atdd-验收测试驱动开发)
  - [关于验收测试驱动开发的问题](#关于验收测试驱动开发的问题)
    - [基础和重要性](#基础和重要性)
      - [什么是验收测试驱动开发（ATDD）？](#什么是验收测试驱动开发atdd)
      - [为什么 ATDD 在软件开发中很重要？](#为什么-atdd-在软件开发中很重要)
      - [ATDD 与传统测试方法有何不同？](#atdd-与传统测试方法有何不同)
      - [使用 ATDD 的主要优势有哪些？](#使用-atdd-的主要优势有哪些)
      - [ATDD 如何提高软件产品的质量？](#atdd-如何提高软件产品的质量)
    - [流程和技术](#流程和技术)
      - [ATDD 有哪些关键步骤？](#atdd-有哪些关键步骤)
      - [ATDD 如何创建验收测试？](#atdd-如何创建验收测试)
      - [ATDD 通常使用哪些技术？](#atdd-通常使用哪些技术)
      - [ATDD 如何融入软件开发生命周期？](#atdd-如何融入软件开发生命周期)
      - [测试人员在 ATDD 中扮演什么角色？](#测试人员在-atdd-中扮演什么角色)

# ATDD 验收测试驱动开发

验收测试驱动开发（ATDD）是一种旨在通过将测试作为开发过程的核心组成部分来减少缺陷的开发方法。这确保应用程序达到高质量标准。

相关术语：

- [TDD 测试驱动开发](../T/test-driven-development.md)
- [UAT 用户验收测试](../U/user-acceptance-testing.md)

更多信息也可以看看：
[Wikipedia](https://en.wikipedia.org/wiki/Acceptance_test-driven_development)

> wikipedia 只有英文版本，没有中文版本。

## 关于验收测试驱动开发的问题

### 基础和重要性

#### 什么是验收测试驱动开发（ATDD）？

验收测试驱动开发（ATDD）是一种开发方法，团队成员（包括开发人员、测试人员和业务客户）在编码开始之前共同编写验收测试，以不同的视角为特色。其主要目标是明确系统功能的详细、以客户为中心的标准，以指导开发并清晰了解所期望的结果。

在 ATDD 中，验收测试以示例或场景的形式表达，通常采用“Given-When-Then”格式，描述了系统从用户角度的行为。这些测试被自动化，并作为实时文档和回归测试套件的一部分。

ATDD 促进了团队成员之间更好的沟通和理解，确保功能符合业务需求。它使开发工作与客户需求保持一致，有助于防止功能蔓延和缺陷。通过从一开始关注客户需求，团队可以交付更有价值且质量更高的软件。

在 ATDD 中，测试人员的角色不仅仅局限于传统的测试，还包括参与需求澄清，并确保验收标准是可测试和清晰的。测试人员与开发人员和业务代表密切合作，共同创建和自动化验收测试。

用于 ATDD 的常用工具包括 Cucumber、SpecFlow 和 FitNesse，它们支持行为驱动开发（[BDD](../B/bdd.md)）和以实例为基础的规范实践。这些工具允许使用所有利益相关者都能理解的语言编写测试，弥合了技术和非技术团队成员之间的差距。

有效实施 ATDD 需要转变思维和实践，强调前期规范、持续反馈和迭代开发。它是敏捷和精益开发方法中的关键实践，有助于交付符合用户期望的高质量软件。

#### 为什么 ATDD 在软件开发中很重要？

在软件开发中，ATDD 至关重要，因为它确保在编码开始之前，所有利益相关者都对需求有共同的理解。这种方法使开发人员、测试人员和业务代表围绕已达成一致的验收标准进行对齐，促进更好的沟通和协作。通过从一开始关注客户需求，ATDD 最小化了误解的风险，并降低了在开发周期后期进行昂贵的返工的可能性。

在开发过程的早期引入 ATDD 有助于在问题升级之前识别和解决问题，从而导致更高效和流畅的工作流程。它鼓励使用简单语言进行行为规范，使测试对所有参与方都易于理解。这种明确性有助于在开发之前预防缺陷，这是与传统测试方法相比更为主动的方法。

ATDD 还促进了持续反馈，允许在整个开发生命周期中进行迭代改进。这个迭代的过程有助于完善产品以更好地满足用户期望，最终产生与业务目标密切对齐的高质量软件。

此外，ATDD 对自动化的强调支持[回归测试](../R/regression-testing.md)，实现了一个可处理变化而不需要显著增加工作量的可持续测试过程。这个[自动化测试](../A/automated-testing.md)框架对于在快节奏的开发环境中保持高质量尤为重要，特别是在扩大到较大项目时。

总之，ATDD 之所以重要，是因为它促进了共享理解，减少了返工，确保与业务目标的一致，并支持一个可持续、高质量的开发过程。

#### ATDD 与传统测试方法有何不同？

ATDD，或验收测试驱动开发，主要在其**协作方法**和**时机**方面与传统测试方法不同。传统测试通常发生在开发阶段之后，测试人员根据已经实现的功能创建并执行测试。相比之下，ATDD 涉及到包括开发人员、测试人员和业务代表在内的多个利益相关者，他们在编写任何代码之前定义验收标准并创建验收测试。

ATDD 中的这种前期协作确保所有方对需求和“完成”的定义有共同的理解。它将重点从开发后发现[缺陷](../B/bug.md)转移到通过早期澄清期望来预防[缺陷](../B/bug.md)。此外，ATDD 鼓励**行为驱动开发**（[BDD](../B/bdd.md)），其中测试以所有利益相关者都能理解的语言编写，通常使用 Given-When-Then 格式。

而传统测试方法可能会严重依赖[手动测试](../M/manual-testing.md)或在事后创建自动化测试，ATDD 从一开始就集成了**[自动化测试](../A/automated-testing.md)**。验收测试被自动化，并成为**回归套件**的一部分，提供关于新更改是否符合已达成一致的标准的即时反馈。

总的来说，ATDD 的积极、协作的方法与传统的被动测试方法形成对比，强调预防而非检测，并在整个团队中促进了对质量的共同责任。

#### 使用 ATDD 的主要优势有哪些？

ATDD 提供了一些增强软件开发过程的关键优势：

- **增强协作**：通过在开发周期的早期涉及各种利益相关者（开发人员、测试人员、业务分析师），ATDD 促进了更好的理解和沟通。
- **清晰需求**：验收测试充当具体的需求，减少了歧义，并确保软件满足业务需求。
- **早期缺陷检测**：在验收标准在前期定义时，问题被更早地识别出来，减少了后期修复缺陷的成本和工作量。
- **客户满意度**：关注满足验收标准确保最终产品与客户期望一致。
- **回归安全**：自动化验收测试提供了一个安全网，使得在不破坏现有功能的情况下重构和改进代码更加安全。
- **持续反馈**：定期执行验收测试为产品的状态提供了持续的洞察，允许及时进行调整。
- **流程化开发**：清晰的验收标准指导了开发工作，防止了功能蔓延和过度工程化。

实施 ATDD 可以导致一个更高效、协作和质量导向的开发生命周期，最终交付更好满足用户需求并经受住时间考验的软件。

#### ATDD 如何提高软件产品的质量？

ATDD 通过确保准确满足**[功能需求](../F/functional-requirements.md)** 并使产品表现如利益相关者期望的方式，提高了[软件质量](../S/software-quality.md)。通过从一开始关注客户需求，ATDD 促进了**清晰且可执行的规范**的创建。这些规范指导开发和测试，减少了由于误解或不完整的需求而导致的缺陷的可能性。

验收测试在编写代码**之前**就已经定义好，这意味着开发人员有一个明确的目标。这种**先测试后编码的方法**有助于防止功能蔓延，并确保代码库只包含通过测试所必需的内容，从而使代码库更清晰且更易维护。

此外，ATDD 鼓励开发人员、测试人员和业务利益相关者之间的协作。这种**跨职能的沟通**有助于在开发过程的早期识别和解决模糊之处，这可以显著提高产品的质量。

来自验收测试执行的持续反馈允许**早期检测问题**，通常比在开发周期后期发现的[缺陷](../B/bug.md)更具成本效益。此外，验收测试套件成为可以用于**[回归测试](../R/regression-testing.md)**的实时文档，确保新更改不会破坏现有功能。

总的来说，ATDD 通过澄清需求、促进协作和提供持续反馈，有助于构建与业务需求和用户期望密切一致的产品，从而提高[软件质量](../S/software-quality.md)。

### 流程和技术

#### ATDD 有哪些关键步骤？

在 ATDD 中涉及的关键步骤包括：

1. **协作：** 开发人员、测试人员和业务利益相关者之间的协作，共同定义验收标准。
2. **编写验收测试：** 在开发开始之前，基于达成一致的标准编写验收测试。
3. **开发：** 根据验收测试指导功能或用户故事的开发。
4. **持续集成：** 确保代码更改会自动根据验收测试进行测试。
5. **修正：** 根据需要对验收测试进行修正，以解决需求或理解的变化。
6. **[测试执行](../T/test-execution.md)**：验证软件是否符合达成一致的验收标准。
7. **审查和反馈：** 利益相关者审查验收测试，确认其覆盖所需的功能和行为。
8. **[迭代](../I/iteration.md)**：根据需要通过这些步骤进行迭代，直到功能符合验收标准。

验收测试通常是自动化的，以便频繁执行和[回归测试](../R/regression-testing.md)。测试以对所有相关方可理解的语言编写，通常使用行为驱动开发（[BDD](../B/bdd.md)）框架，如 Cucumber 或 SpecFlow。这确保了测试既充当规范又用于验证。

```typescript
Feature: User login
   Scenario: Valid login
    Given I am on the login page
    When I enter valid credentials
    Then I should be redirected to the dashboard
```

实现有效的 ATDD 需要团队成员之间建立起强烈的协作文化、保持清晰的沟通，以及对质量的共同承诺。

#### ATDD 如何创建验收测试？

在 ATDD 中，验收测试是通过团队成员之间的**协作**创建的，包括开发人员、测试人员和业务利益相关者。该过程始于定义**用户故事**，描述了用户从其角度期望的功能。每个用户故事都包括**验收标准**，这些标准构成了验收测试的基础。

团队讨论验收标准，以确保对需求的共同理解。这种讨论通常涉及**示例映射**或**实例说明**，其中使用具体的示例来阐明期望并涵盖不同的场景。

一旦达成共识，就会编写**可执行规范**。这些规范通常以**Given-When-Then**语句的形式结构化，可以直接转化为自动化测试。例如：

```typescript
Given the user is logged in
When they attempt to place an order
Then the order should be processed
```

然后，使用 ATDD 框架（如**Cucumber**或**SpecFlow**）自动化这些规范，这允许以对非技术利益相关者可访问的领域特定语言编写测试。自动化代码使用框架兼容的语言编写，例如使用 Cucumber 的 Java 或使用 SpecFlow 的 C#。

```typescript
@Given("^the user is logged in$")
public void the_user_is_logged_in() {
    // Code to ensure user is logged in
}

@When("^they attempt to place an order$")
public void they_attempt_to_place_an_order() {
    // Code to simulate order placement
}

@Then("^the order should be processed$")
public void the_order_should_be_processed() {
    // Assertions to verify order processing
}
```

验收测试在整个开发过程中持续执行，以验证软件是否符合达成一致的标准。这确保了新功能的开发以用户需求为导向，并及早捕捉到回归问题。

#### ATDD 通常使用哪些技术？

在 ATDD 中，采用了多种技术来确保满足验收标准并确保软件的行为符合预期：

- **行为驱动开发（[BDD](../B/bdd.md)）**：这一技术涉及以自然语言风格编写测试，描述应用程序的行为。通常使用诸如 Cucumber 或 SpecFlow 之类的工具来促进[BDD](../B/bdd.md)。
- **实例说明**：共同定义说明具体行为或要求的示例。这些示例然后被用作验收测试的基础。
- **示例映射**：一个团队成员使用卡片来代表用户故事（黄色）、规则（蓝色）、示例（绿色）和问题（红色）的研讨会技术。这有助于理解故事并创建验收测试。
- **可执行规范**：以使它们可以直接针对代码执行的方式编写验收测试。这通常涉及使用特定领域语言（DSL）以一种所有利益相关者都能理解的方式来表达测试。
- **测试先开发**：在实际实施开始之前编写验收测试，确保开发集中在通过测试。
- **协作工具**：使用促进业务利益相关者、开发人员和测试人员之间协作的工具，例如共享存储库或像[JIRA](../J/jira.md)与 Xray 或 TestRail 这样的协作平台。
- **持续集成（CI）**：将验收测试作为 CI 流水线的一部分自动运行，以获取有关所做更改的即时反馈。
- **测试工件的版本控制**：将验收测试与代码库一起存储在版本控制系统中，以保持[测试用例](../T/test-case.md)与应用程序代码之间的同步。

这些技术有助于定义清晰的验收标准，促进团队成员之间的协作，并确保在被视为完整之前软件满足业务需求。

#### ATDD 如何融入软件开发生命周期？

ATDD 通过从一开始就将开发活动与指定的验收标准对齐，融入了软件开发生命周期（SDLC）。在**初始阶段**，利益相关者共同合作以定义和理解需求，然后将其转化为验收测试。这些测试代表了软件必须展示的**行为**，以被视为完整。

在**规划和设计**阶段，验收测试得到审查和完善，确保它们清晰可测试。开发人员、测试人员和业务代表保持**持续沟通**，以澄清任何模糊之处。

随着开发的开始，**验收测试引导编码**。开发人员编写足够的代码以通过这些测试，确保功能符合达成的标准。这种做法通常被称为**测试先开发**，促进了**渐进式进展**并有助于及早发现问题。

在**测试阶段**，自动化验收测试经常执行，为软件功能提供**即时反馈**。这允许快速调整并有助于保持开发的**稳定节奏**。

在发布之前，ATDD 确保产品符合业务需求，因为所有功能都是根据预定义的验收测试开发的。代码的**持续集成**和验收测试的**定期执行**有助于保持一个为部署准备的**稳定构建**。

在部署后，这些验收测试成为**回归测试套件**的一部分，防范可能破坏现有功能的未来更改。ATDD 融入 SDLC 支持**可持续、以质量为中心的开发过程**。

#### 测试人员在 ATDD 中扮演什么角色？

在 ATDD 中，测试人员的角色是多方面的，侧重于协作、规范和验证。测试人员与**开发人员**、**业务分析师**和**利益相关者**密切合作，澄清需求并确保验收标准定义明确。他们为**用户故事**和**验收测试的创建**做出贡献，确保这些测试准确反映业务需求并且可以自动化。

在开发过程中，测试人员参与验收测试的**持续完善**，通常与开发人员搭档创建和维护[自动化测试](../T/test-automation.md)。他们确保测试是**可执行的规范**，指导开发并即时提供有关软件行为是否符合预期结果的反馈。

测试人员还在**维护[测试套件](../T/test-suite.md)**方面发挥了关键作用，确保随着代码库的演变它保持**可靠**和**高效**。他们还可能负责**[测试数据](../T/test-data.md)管理**和设置必要的**[测试环境](../T/test-environment.md)**。

在 ATDD 循环中，测试人员帮助促进**三位好朋友会议**，讨论特性实施的问题，并积极参与**[迭代](../I/iteration.md)计划** 和 **回顾**以不断改进流程。

最终，在 ATDD 中，测试人员确保团队交付的产品不仅满足技术需求，而且满足业务需求并为最终用户提供价值。他们在推动 ATDD 中固有的**质量为先**的方法方面发挥关键作用。
